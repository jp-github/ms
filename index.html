<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>面试专题.md</title><link href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}#write, body { height: auto; }
#write, #write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write ol, #write p, #write ul { position: relative; }
#write, #write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
.CodeMirror, .md-fences, table { text-align: left; }
.md-reset, a:active, a:hover { outline: 0px; }
.md-reset, .md-toc-item a { text-decoration: none; }
.MathJax_SVG, .md-reset { float: none; direction: ltr; }
:root { --bg-color:#ffffff; --text-color:#333333; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; }
.in-text-selection, ::selection { background: rgb(181, 214, 252); text-shadow: none; }
#write { margin: 0px auto; word-break: normal; word-wrap: break-word; padding-bottom: 70px; white-space: pre-wrap; overflow-x: visible; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
.typora-export #write { margin: 0px auto; }
#write > blockquote:first-child, #write > div:first-child, #write > ol:first-child, #write > p:first-child, #write > pre:first-child, #write > table:first-child, #write > ul:first-child { margin-top: 30px; }
#write li > table:first-child { margin-top: -20px; }
img { max-width: 100%; vertical-align: middle; }
button, input, select, textarea { color: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
p { -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; }
.typora-export p { white-space: normal; }
.mathjax-block { margin-top: 0px; margin-bottom: 0px; -webkit-margin-before: 0px; -webkit-margin-after: 0px; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
#write > figure:first-child { margin-top: 16px; }
figure { overflow-x: auto; margin: -8px 0px 0px -8px; max-width: calc(100% + 16px); padding: 8px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; }
.CodeMirror-line, .md-fences { break-inside: avoid; }
table.md-table td { min-width: 80px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; margin-right: 4px; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
pre { white-space: pre-wrap; }
.md-fences { font-size: 0.9rem; display: block; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
.md-fences .CodeMirror.CodeMirror-wrap { top: -1.6em; margin-bottom: -1.6em; }
.md-fences.mock-cm { white-space: pre-wrap; }
.show-fences-line-number .md-fences { padding-left: 0px; }
.show-fences-line-number .md-fences.mock-cm { padding-left: 40px; }
.footnotes { opacity: 0.8; font-size: 0.9rem; padding-top: 1em; padding-bottom: 1em; }
.footnotes + .footnotes { margin-top: -1em; }
.md-reset { margin: 0px; padding: 0px; border: 0px; vertical-align: top; background: 0px 0px; text-shadow: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; }
.md-toc-inner, a img, img a { cursor: pointer; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: nowrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  h1, h2, h3, h4, h5, h6 { break-after: avoid-page; orphans: 2; }
  p { orphans: 4; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 1cm; padding-right: 1cm; padding-bottom: 0px; break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  @page { margin: 20mm 0px; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > img:only-child { display: block; margin: auto; }
.md-line > .md-image:only-child, p > .md-image:only-child { display: inline-block; width: 100%; text-align: center; }
.mathjax-block:not(:empty)::after, .md-toc-content::after, .md-toc::after { display: none; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.mathjax-block { white-space: pre; overflow: hidden; width: 100%; }
p + .mathjax-block { margin-top: -1.143rem; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.MathJax_SVG, .mathjax-block .MathJax_SVG_Display { text-indent: 0px; max-width: none; max-height: none; min-height: 0px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-inner:hover { }
.md-toc-inner { display: inline-block; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
.md-tag { opacity: 0.5; }
code, pre, tt { font-family: var(--monospace); }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; }
h1 .md-tag, h2 .md-tag, h3 .md-tag, h4 .md-tag, h5 .md-tag, h6 .md-tag { font-weight: initial; opacity: 0.35; }
a.md-print-anchor { border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.mathjax-block .MathJax_SVG_Display { text-align: center; margin: 1em 0px; position: relative; min-width: 100%; width: auto; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: monospace; }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; min-width: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none; }
.md-diagram-panel > svg, [lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }


.CodeMirror, .CodeMirror-sizer { position: relative; }
.CodeMirror.cm-s-inner { background: inherit; }
.fences-no-line-wrapping .md-fences .CodeMirror { margin-top: -30px; }
.CodeMirror-scroll { overflow-y: hidden; overflow-x: auto; }
.CodeMirror-lines { padding: 4px 0px; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-scroll, .cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta, .cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error, .cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.CodeMirror { height: auto; overflow: hidden; }
.CodeMirror-scroll { margin-bottom: -30px; padding-bottom: 30px; height: 100%; outline: 0px; position: relative; box-sizing: content-box; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow-x: hidden; overflow-y: scroll; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow-y: hidden; overflow-x: scroll; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; word-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { word-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; border-right: none; width: 0px; visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.CodeMirror-selected { background: rgb(217, 217, 217); }
.CodeMirror-focused .CodeMirror-selected { background: rgb(215, 212, 240); }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}
.CodeMirror-lint-markers { width: 16px; }
.CodeMirror-lint-tooltip { background-color: infobackground; border: 1px solid rgb(0, 0, 0); border-radius: 4px; color: infotext; font-family: var(--monospace); overflow: hidden; padding: 2px 5px; position: fixed; white-space: pre-wrap; z-index: 10000; max-width: 600px; opacity: 0; transition: opacity 0.4s; font-size: 0.8em; }
.CodeMirror-lint-mark-error, .CodeMirror-lint-mark-warning { background-position: left bottom; background-repeat: repeat-x; }
.CodeMirror-lint-mark-error { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg=="); }
.CodeMirror-lint-marker-error, .CodeMirror-lint-marker-warning { background-position: center center; background-repeat: no-repeat; cursor: pointer; display: inline-block; height: 16px; width: 16px; vertical-align: middle; position: relative; }
.CodeMirror-lint-message-error, .CodeMirror-lint-message-warning { padding-left: 18px; background-position: left top; background-repeat: no-repeat; }
.CodeMirror-lint-marker-error, .CodeMirror-lint-message-error { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII="); }
.CodeMirror-lint-marker-warning, .CodeMirror-lint-message-warning { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII="); }
.CodeMirror-lint-marker-multiple { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC"); background-repeat: no-repeat; background-position: right bottom; width: 100%; height: 100%; }


:root { --side-bar-bg-color: #fafafa; --control-text-color: #777; }
@font-face { font-family: "Open Sans"; font-style: normal; font-weight: normal; src: local("Open Sans Regular"), url("./github/400.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: italic; font-weight: normal; src: local("Open Sans Italic"), url("./github/400i.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: normal; font-weight: bold; src: local("Open Sans Bold"), url("./github/700.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: italic; font-weight: bold; src: local("Open Sans Bold Italic"), url("./github/700i.woff") format("woff"); }
html { font-size: 16px; }
body { font-family: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; color: rgb(51, 51, 51); line-height: 1.6; }
#write { max-width: 860px; margin: 0px auto; padding: 20px 30px 100px; }
#write > ul:first-child, #write > ol:first-child { margin-top: 30px; }
body > :first-child { margin-top: 0px !important; }
body > :last-child { margin-bottom: 0px !important; }
a { color: rgb(65, 131, 196); }
h1, h2, h3, h4, h5, h6 { position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text; }
h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor { text-decoration: none; }
h1 tt, h1 code { font-size: inherit; }
h2 tt, h2 code { font-size: inherit; }
h3 tt, h3 code { font-size: inherit; }
h4 tt, h4 code { font-size: inherit; }
h5 tt, h5 code { font-size: inherit; }
h6 tt, h6 code { font-size: inherit; }
h1 { padding-bottom: 0.3em; font-size: 2.25em; line-height: 1.2; border-bottom: 1px solid rgb(238, 238, 238); }
h2 { padding-bottom: 0.3em; font-size: 1.75em; line-height: 1.225; border-bottom: 1px solid rgb(238, 238, 238); }
h3 { font-size: 1.5em; line-height: 1.43; }
h4 { font-size: 1.25em; }
h5 { font-size: 1em; }
h6 { font-size: 1em; color: rgb(119, 119, 119); }
p, blockquote, ul, ol, dl, table { margin: 0.8em 0px; }
li > ol, li > ul { margin: 0px; }
hr { height: 4px; padding: 0px; margin: 16px 0px; background-color: rgb(231, 231, 231); border-width: 0px 0px 1px; border-style: none none solid; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; overflow: hidden; box-sizing: content-box; border-bottom-color: rgb(221, 221, 221); }
body > h2:first-child { margin-top: 0px; padding-top: 0px; }
body > h1:first-child { margin-top: 0px; padding-top: 0px; }
body > h1:first-child + h2 { margin-top: 0px; padding-top: 0px; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child { margin-top: 0px; padding-top: 0px; }
a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 { margin-top: 0px; padding-top: 0px; }
h1 p, h2 p, h3 p, h4 p, h5 p, h6 p { margin-top: 0px; }
li p.first { display: inline-block; }
ul, ol { padding-left: 30px; }
ul:first-child, ol:first-child { margin-top: 0px; }
ul:last-child, ol:last-child { margin-bottom: 0px; }
blockquote { border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px; color: rgb(119, 119, 119); }
blockquote blockquote { padding-right: 0px; }
table { padding: 0px; word-break: initial; }
table tr { border-top: 1px solid rgb(204, 204, 204); margin: 0px; padding: 0px; }
table tr:nth-child(2n) { background-color: rgb(248, 248, 248); }
table tr th { font-weight: bold; border-width: 1px 1px 0px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); border-image: initial; border-bottom-style: initial; border-bottom-color: initial; text-align: left; margin: 0px; padding: 6px 13px; }
table tr td { border: 1px solid rgb(204, 204, 204); text-align: left; margin: 0px; padding: 6px 13px; }
table tr th:first-child, table tr td:first-child { margin-top: 0px; }
table tr th:last-child, table tr td:last-child { margin-bottom: 0px; }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); }
.md-fences, code, tt { border: 1px solid rgb(221, 221, 221); background-color: rgb(248, 248, 248); border-radius: 3px; font-family: Consolas, "Liberation Mono", Courier, monospace; padding: 2px 4px 0px; font-size: 0.9em; }
.md-fences { margin-bottom: 15px; margin-top: 15px; padding: 8px 1em 6px; }
.md-task-list-item > input { margin-left: -1.3em; }
@media screen and (min-width: 914px) {
}
@media print {
  html { font-size: 13px; }
  table, pre { break-inside: avoid; }
  pre { word-wrap: break-word; }
}
.md-fences { background-color: rgb(248, 248, 248); }
#write pre.md-meta-block { padding: 1rem; font-size: 85%; line-height: 1.45; background-color: rgb(247, 247, 247); border: 0px; border-radius: 3px; color: rgb(119, 119, 119); margin-top: 0px !important; }
.mathjax-block > .code-tooltip { bottom: 0.375rem; }
#write > h3.md-focus::before { left: -1.5625rem; top: 0.375rem; }
#write > h4.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h5.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h6.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
.md-image > .md-meta { border-radius: 3px; font-family: Consolas, "Liberation Mono", Courier, monospace; padding: 2px 4px 0px; font-size: 0.9em; color: inherit; }
.md-tag { color: inherit; }
.md-toc { margin-top: 20px; padding-bottom: 20px; }
.sidebar-tabs { border-bottom: none; }
#typora-quick-open { border: 1px solid rgb(221, 221, 221); background-color: rgb(248, 248, 248); }
#typora-quick-open-item { background-color: rgb(250, 250, 250); border-color: rgb(254, 254, 254) rgb(229, 229, 229) rgb(229, 229, 229) rgb(238, 238, 238); border-style: solid; border-width: 1px; }
#md-notification::before { top: 10px; }
.on-focus-mode blockquote { border-left-color: rgba(85, 85, 85, 0.12); }
header, .context-menu, .megamenu-content, footer { font-family: "Segoe UI", Arial, sans-serif; }
.file-node-content:hover .file-node-icon, .file-node-content:hover .file-node-open-state { visibility: visible; }
.mac-seamless-mode #typora-sidebar { background-color: var(--side-bar-bg-color); }
.md-lang { color: rgb(180, 101, 77); }
.html-for-mac .context-menu { --item-hover-bg-color: #E6F0FE; }






</style>
</head>
<body class='typora-export' >
<div  id='write'  class = 'is-node'><div class='md-toc' mdtype='toc'><p class="md-toc-content"><span class="md-toc-item md-toc-h2" data-ref="n1341"><a class="md-toc-inner" href="#header-n1341">一：java基础</a></span><span class="md-toc-item md-toc-h3" data-ref="n1342"><a class="md-toc-inner" href="#header-n1342">1.1：java 面向对象三大特性（封装，继承，多态）？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1349"><a class="md-toc-inner" href="#header-n1349">1.2：抽象类和接口的区别？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1356"><a class="md-toc-inner" href="#header-n1356">1.3:  重写和重载？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1361"><a class="md-toc-inner" href="#header-n1361">1.4 ：String、StringBuffer、StringBuilder的区别?</a></span><span class="md-toc-item md-toc-h3" data-ref="n1370"><a class="md-toc-inner" href="#header-n1370">1.5：java中的集合？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1397"><a class="md-toc-inner" href="#header-n1397">1.6：ArrayList和Linkedlist区别？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1414"><a class="md-toc-inner" href="#header-n1414">1.7：HashMap底层原理?</a></span><span class="md-toc-item md-toc-h3" data-ref="n1417"><a class="md-toc-inner" href="#header-n1417">1.8：Java 到底是值传递还是引用传递？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1422"><a class="md-toc-inner" href="#header-n1422">1.9：== 和equals有什么区别？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1431"><a class="md-toc-inner" href="#header-n1431">1.10:java的类加载机制？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1447"><a class="md-toc-inner" href="#header-n1447">1.11:java的类加载顺序？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1454"><a class="md-toc-inner" href="#header-n1454">1.12: 手写排序算法？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1456"><a class="md-toc-inner" href="#header-n1456">1.13：设计模式</a></span><span class="md-toc-item md-toc-h3" data-ref="n1465"><a class="md-toc-inner" href="#header-n1465">1.14：jvm虚拟机的内存模型都有哪些？分别都存放那些数据？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1480"><a class="md-toc-inner" href="#header-n1480">1.15 ：GC垃圾回收算法？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1493"><a class="md-toc-inner" href="#header-n1493">1.16：jdk1.8有哪写新特性？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1520"><a class="md-toc-inner" href="#header-n1520">1.17：Java多线程创建方式？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1529"><a class="md-toc-inner" href="#header-n1529">1.18：Java线程的基本状态？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1558"><a class="md-toc-inner" href="#header-n1558">1.19：多线程中的常用方法及含义？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1575"><a class="md-toc-inner" href="#header-n1575">1.20：Java多线程线程池及核心参数？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1632"><a class="md-toc-inner" href="#header-n1632">1.21：Java多线程中  Synchronized &amp; volatile理解</a></span><span class="md-toc-item md-toc-h3" data-ref="n1643"><a class="md-toc-inner" href="#header-n1643">1.22:线程池的拒绝策略/饱和策略</a></span><span class="md-toc-item md-toc-h3" data-ref="n1648"><a class="md-toc-inner" href="#header-n1648">1.23 ：锁</a></span><span class="md-toc-item md-toc-h3" data-ref="n1649"><a class="md-toc-inner" href="#header-n1649">1.24：Java线程的三要素</a></span><span class="md-toc-item md-toc-h2" data-ref="n1652"><a class="md-toc-inner" href="#header-n1652">二： spring &amp; springMVC</a></span><span class="md-toc-item md-toc-h3" data-ref="n1653"><a class="md-toc-inner" href="#header-n1653">2.1: 介绍一下spring？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1662"><a class="md-toc-inner" href="#header-n1662">2.2 : AOP的实现原理？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1674"><a class="md-toc-inner" href="#header-n1674">2.3 :  详细介绍下IOC容器</a></span><span class="md-toc-item md-toc-h3" data-ref="n1685"><a class="md-toc-inner" href="#header-n1685">2.4：springbean的生命周期？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1701"><a class="md-toc-inner" href="#header-n1701">2.5： springbean的作用域？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1714"><a class="md-toc-inner" href="#header-n1714">2.6：事务的传播特性？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1748"><a class="md-toc-inner" href="#header-n1748">2.7：事务的隔离级别？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1766"><a class="md-toc-inner" href="#header-n1766">2.8：spring中都用了哪些设计模式？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1777"><a class="md-toc-inner" href="#header-n1777">2.9：springMVC的执行流程？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1794"><a class="md-toc-inner" href="#header-n1794">2.10：springMVC中的常用注解？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1813"><a class="md-toc-inner" href="#header-n1813">2.11：分布式锁解决方案</a></span><span class="md-toc-item md-toc-h2" data-ref="n1855"><a class="md-toc-inner" href="#header-n1855">三：mybatis &amp; mybatisplus</a></span><span class="md-toc-item md-toc-h3" data-ref="n1856"><a class="md-toc-inner" href="#header-n1856">3.1： mybatis 的优缺点？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1875"><a class="md-toc-inner" href="#header-n1875">3.2: 当实体类中的属性名和表中的字段名不一样 ，怎么办？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1882"><a class="md-toc-inner" href="#header-n1882">3.4 ：mybatis 如何执行批量插入?</a></span><span class="md-toc-item md-toc-h3" data-ref="n1888"><a class="md-toc-inner" href="#header-n1888">3.5 :  Mybatis有哪些动态sql？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1899"><a class="md-toc-inner" href="#header-n1899">3.7:MyBatis 一级缓存和二级缓存？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1907"><a class="md-toc-inner" href="#header-n1907">3.8: MyBatis中${} 和#{}的区别？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1914"><a class="md-toc-inner" href="#header-n1914">3.9：MyBatis执行原理描述？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1929"><a class="md-toc-inner" href="#header-n1929">3.10：MyBatis 和MyBatisPlus的区别？</a></span><span class="md-toc-item md-toc-h2" data-ref="n1936"><a class="md-toc-inner" href="#header-n1936">四：springboot &amp; springcloud</a></span><span class="md-toc-item md-toc-h3" data-ref="n1937"><a class="md-toc-inner" href="#header-n1937">4.1：springboot优点？为什么选用springboot？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1948"><a class="md-toc-inner" href="#header-n1948">4.2：如何理解springboot 的starters ？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1951"><a class="md-toc-inner" href="#header-n1951">4.3： springboot自动配置原理？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1954"><a class="md-toc-inner" href="#header-n1954">4.4：Spring Boot 如何实现全局异常处理？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1957"><a class="md-toc-inner" href="#header-n1957">4.5：Spring boot 核心注解？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1966"><a class="md-toc-inner" href="#header-n1966">4.6：spring cloud 的核心组件用到哪些？详细说一下他们各自的作用及请求的流程？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1969"><a class="md-toc-inner" href="#header-n1969">4.7：SpringCloud和Dubbo比较，谈谈个人看法？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1972"><a class="md-toc-inner" href="#header-n1972">4.8：spring、springMVC、springboot、springcloud 的区别与联系？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1983"><a class="md-toc-inner" href="#header-n1983">4.9：SpringBoot和SpringCloud的区别/关系？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1988"><a class="md-toc-inner" href="#header-n1988">4.10：feign 和 openfeign 有什么区别？</a></span><span class="md-toc-item md-toc-h3" data-ref="n1993"><a class="md-toc-inner" href="#header-n1993">4.11：feign的底层原理？</a></span><span class="md-toc-item md-toc-h2" data-ref="n2016"><a class="md-toc-inner" href="#header-n2016">五：redis &amp; mongodb &amp; mysql</a></span><span class="md-toc-item md-toc-h3" data-ref="n2017"><a class="md-toc-inner" href="#header-n2017">5.1：redis的数据类型，以及每种数据类型的使用场景？</a></span><span class="md-toc-item md-toc-h3" data-ref="n2055"><a class="md-toc-inner" href="#header-n2055">5.2:Redis持久化机制?</a></span><span class="md-toc-item md-toc-h3" data-ref="n2068"><a class="md-toc-inner" href="#header-n2068">5.3： 缓存穿透、缓存击穿、缓存雪崩、缓存预热、缓存同步？</a></span><span class="md-toc-item md-toc-h3" data-ref="n2123"><a class="md-toc-inner" href="#header-n2123">5.4： redis集群？</a></span><span class="md-toc-item md-toc-h3" data-ref="n2130"><a class="md-toc-inner" href="#header-n2130">5.5： redis分布式锁？</a></span><span class="md-toc-item md-toc-h3" data-ref="n2133"><a class="md-toc-inner" href="#header-n2133">5.6：MongoDB和redis 有什么区别？</a></span><span class="md-toc-item md-toc-h3" data-ref="n2142"><a class="md-toc-inner" href="#header-n2142">5.7 : mysql索引都有哪些？如何创建索引？</a></span><span class="md-toc-item md-toc-h3" data-ref="n2245"><a class="md-toc-inner" href="#header-n2245">5.10: mysql查询语句优化？</a></span><span class="md-toc-item md-toc-h3" data-ref="n2262"><a class="md-toc-inner" href="#header-n2262">5.11： mysql存储过程和视图？</a></span><span class="md-toc-item md-toc-h3" data-ref="n2267"><a class="md-toc-inner" href="#header-n2267">5.12： mysql行转列与列转行？</a></span><span class="md-toc-item md-toc-h3" data-ref="n2272"><a class="md-toc-inner" href="#header-n2272">5.13： 分库分表中解释一下垂直和水平2种不同的拆分？</a></span><span class="md-toc-item md-toc-h3" data-ref="n2277"><a class="md-toc-inner" href="#header-n2277">5.14 : 分库分表中垂直分库方案会带来哪些问题？</a></span><span class="md-toc-item md-toc-h3" data-ref="n2282"><a class="md-toc-inner" href="#header-n2282">5.15： 搭建mycat的核心配置文件有哪些？</a></span><span class="md-toc-item md-toc-h3" data-ref="n2289"><a class="md-toc-inner" href="#header-n2289">5.16 :  什么叫垂直切分？什么叫混合切分？项目中有没有可能只用水平切分？</a></span><span class="md-toc-item md-toc-h3" data-ref="n2296"><a class="md-toc-inner" href="#header-n2296">5.17：数据库设计三范式</a></span><span class="md-toc-item md-toc-h6" data-ref="n2361"><a class="md-toc-inner" href="#header-n2361">生产者丢失消息</a></span><span class="md-toc-item md-toc-h6" data-ref="n2364"><a class="md-toc-inner" href="#header-n2364">消息队列丢失消息</a></span><span class="md-toc-item md-toc-h6" data-ref="n2367"><a class="md-toc-inner" href="#header-n2367">消费者丢失消息</a></span><span class="md-toc-item md-toc-h3" data-ref="n2423"><a class="md-toc-inner" href="#header-n2423">6.7: rabbitmq什么时候变成死信队列？</a></span><span class="md-toc-item md-toc-h3" data-ref="n2434"><a class="md-toc-inner" href="#header-n2434">6.8：kafka中的broker 是干什么的</a></span><span class="md-toc-item md-toc-h3" data-ref="n2437"><a class="md-toc-inner" href="#header-n2437">6.9：kafka中的 zookeeper 起到什么作用，可以不用zookeeper么</a></span><span class="md-toc-item md-toc-h3" data-ref="n2442"><a class="md-toc-inner" href="#header-n2442">6.10：kafka 为什么那么快</a></span><span class="md-toc-item md-toc-h2" data-ref="n2451"><a class="md-toc-inner" href="#header-n2451">七：docker &amp; linux</a></span><span class="md-toc-item md-toc-h3" data-ref="n2452"><a class="md-toc-inner" href="#header-n2452">7.1：linux常用命令</a></span><span class="md-toc-item md-toc-h3" data-ref="n2475"><a class="md-toc-inner" href="#header-n2475">7.2：docker中基本命令</a></span><span class="md-toc-item md-toc-h3" data-ref="n2490"><a class="md-toc-inner" href="#header-n2490">7.3：Dockerfile中最常见的指令是什么？</a></span><span class="md-toc-item md-toc-h2" data-ref="n2525"><a class="md-toc-inner" href="#header-n2525">八：电商项目</a></span><span class="md-toc-item md-toc-h3" data-ref="n2526"><a class="md-toc-inner" href="#header-n2526">8.1:用户单点登录</a></span><span class="md-toc-item md-toc-h3" data-ref="n2550"><a class="md-toc-inner" href="#header-n2550">8.2：搜索功能（基于es索引库搜索）</a></span><span class="md-toc-item md-toc-h3" data-ref="n2559"><a class="md-toc-inner" href="#header-n2559">8.3：静态化处理商品详情页</a></span><span class="md-toc-item md-toc-h3" data-ref="n2564"><a class="md-toc-inner" href="#header-n2564">8.4：购物车</a></span><span class="md-toc-item md-toc-h3" data-ref="n2575"><a class="md-toc-inner" href="#header-n2575">8.5：预下单流程</a></span><span class="md-toc-item md-toc-h3" data-ref="n2586"><a class="md-toc-inner" href="#header-n2586">8.6：微信支付流程</a></span><span class="md-toc-item md-toc-h3" data-ref="n2599"><a class="md-toc-inner" href="#header-n2599">8.7：多个人同时购买一个商品库存怎么保证？</a></span><span class="md-toc-item md-toc-h3" data-ref="n2602"><a class="md-toc-inner" href="#header-n2602">8.8：重复订单提交</a></span><span class="md-toc-item md-toc-h3" data-ref="n2609"><a class="md-toc-inner" href="#header-n2609">8.9：超时订单关闭</a></span><span class="md-toc-item md-toc-h2" data-ref="n2612"><a class="md-toc-inner" href="#header-n2612">九：头条项目(阅读资讯类)</a></span><span class="md-toc-item md-toc-h3" data-ref="n2613"><a class="md-toc-inner" href="#header-n2613">9.0：项目架构+微服务拆分方案</a></span><span class="md-toc-item md-toc-h3" data-ref="n2632"><a class="md-toc-inner" href="#header-n2632">9.1：基础功能，admin后台维护基本信息</a></span><span class="md-toc-item md-toc-h3" data-ref="n2635"><a class="md-toc-inner" href="#header-n2635">9.2：普通用户申请成为自媒体人（权限）</a></span><span class="md-toc-item md-toc-h3" data-ref="n2650"><a class="md-toc-inner" href="#header-n2650">9.3：发布、审核和人工审核</a></span><span class="md-toc-item md-toc-h3" data-ref="n2657"><a class="md-toc-inner" href="#header-n2657">9.4：用户评论、文章点赞</a></span><span class="md-toc-item md-toc-h3" data-ref="n2662"><a class="md-toc-inner" href="#header-n2662">9.5：数据同步es库及es api查询</a></span><span class="md-toc-item md-toc-h3" data-ref="n2665"><a class="md-toc-inner" href="#header-n2665">9.6：线程池记录搜索记录</a></span></p></div><p>&nbsp;</p><h2><a name='header-n1341' class='md-header-anchor '></a>一：java基础</h2><h3><a name='header-n1342' class='md-header-anchor '></a>1.1：java 面向对象三大特性（封装，继承，多态）？</h3><p>封装：隐藏对象的属性和实现细节，仅对外公开接口，增强安全性和简化编程，使用者不必了解具体的实现细节，而只是要通过外部接口，一特定的访问权限来使用类的成员</p><p>继承：实现代码的复用，但特别注意的是，父类的私有属性和构造方法并不能被继承。另外子类可以写自己特有的属性和方法，目的是实现功能的扩展，子类也可以复写父类的方法即方法的重写。子类不能继承父类中访问权限为private的成员变量和方法</p><p>多态：相同的事物，调用其相同的方法，参数也相同时，但表现的行为却不同，例如方法重写重载。</p><h3><a name='header-n1349' class='md-header-anchor '></a>1.2：抽象类和接口的区别？</h3><p>1、接口可以多实现，而抽象类只能单继承
2、抽象类可以有非抽象的方法和构造方法、变量，但是接口只能有抽象方法，静态常量。
3、抽象类和子类具有父子关系，子类能拥有父类中一些属性。接口虽然某个类实现一个接口，但是由于接口中的变量都为静态常量，</p><p>​      不存在继承关系。</p><h3><a name='header-n1356' class='md-header-anchor '></a>1.3:  重写和重载？</h3><p><strong>重载</strong>： 在同一个类中，方法名必须相同，参数类型、个数、顺序不同，与返回值类型，访问修饰符无关，发生在编译时。</p><p><strong>重写</strong>： 发生在父子类中，方法名、参数列表必须相同，返回值范围小于等于父类，抛出的异常范围小于等于父类，访问修饰符范围大于等于父类；如果父类方法访问修饰符为 private 则子类就不能重写该方法。</p><h3><a name='header-n1361' class='md-header-anchor '></a>1.4 ：String、StringBuffer、StringBuilder的区别?</h3><p>可变性：三个都是处理字符串的方法，String底层使用final修饰了，所以是不可变的；StringBuilder 与 StringBuffer是可变的字符串;</p><p>安全性：String 中的对象是不可变的，也就可以理解为常量，线程安全。StringBuffer 对方法加了同步锁，所以是线程安全的。StringBuilder 并没有对方法进行加同步锁，所以是不线程安全</p><p>性能：每次对 String 类型进行改变的时候，都会生成一个新的 String 对象，然后将指针指向新的String 对象，修改内容时性能低。StringBuffer、StringBuilder 每次都会对对象本身进行操作，而不是生成新的对象并改变对象引用；StirngBuilder的效率会高一些，而StringBuffer的底层加了同步的关键字，性能会有所下降</p><p>所以呢，一般我们操作少量的字符串的时候用String ，在单线程环境下操作大量数据时使用StringBuilder，在多线程操作大量数据使用StringBuffer。</p><h3><a name='header-n1370' class='md-header-anchor '></a>1.5：java中的集合？</h3><p>java 中的集合分为单列集合和双列集合，单列集合顶级接口为 Collection,双列集合顶级接口为 Map。</p><p>Collection 的子接口有两个：List 和 Set。 </p><p>Ø List 接口的特点：元素可重复，有序(存取顺序)。 list 接口的实现类如下：</p><p>​     Ø  ArrayList:底层实现是数组，查询快，增删慢，线程不安全，效率高；</p><p>​     Ø  Vector:底层实现是数组，查询快，增删慢，线程安全，效率低；【废弃】</p><p>​     Ø  LinkedList:底层实现是链表，增删快，查询慢，线程不安全，效率高；</p><p>Ø  Set 接口的特点：元素唯一，不可重复，无序。 Set 接口实现类如下：</p><p>​    Ø  HashSet:底层实现 hashMap，数组+链表实现，不允许元素重复，无序。</p><p>​    Ø  TreeSet:底层实现红黑二叉树，实现元素排序</p><p>Ø  Map 接口的特点：key-value 键值对形式存储数据 Map 接口实现类如下：</p><p>​    Ø  HashMap：底层数组+链表实现，线程不安全效率高；</p><p>​    Ø  TreeMap：底层红黑二叉树实现，可实现元素的排序；</p><p>​    Ø  LinkedHashMap：底层hashmap+linkedList 实现，通过 hashmap 实现 key-value 键值对存储，通过链表实现元素有序。</p><h3><a name='header-n1397' class='md-header-anchor '></a>1.6：ArrayList和Linkedlist区别？</h3><p>相同点：</p><p>1、二者都是 List 接口的实现类，具有元素可重复，有序(存取顺序)特点；</p><p>2、二者都是线程不安全，效率高； </p><p>不同点：</p><p>1、数据结构：ArrayList底层数据结构是动态数组，LinkedList底层数据结构是双向链表；</p><p>2、随机访问效率：ArrayList比 LinkedList 在随机访问的时候效率要高，因为LinkedList 是线性的数据存储方式，所以需要移动指针从前往后依次查找。</p><p>3、增加和删除效率：在非首尾的增加和删除操作，LinkedList 要比ArrayList 效率要高，因为ArrayList 增删操作要影响数组内的其他数据的下标。</p><p>综合来说，在需要频繁读取集合中的元素时，更推荐使用 ArrayList，而在插入和删除操作较多时，更推荐使用LinkedList。</p><h3><a name='header-n1414' class='md-header-anchor '></a>1.7：HashMap底层原理?</h3><p>HashMap 底层是数组+链表(LinkedList)实现,hashMap 默认初始化容量为 16，也就 是说数组索引值为0-15，每个数组中存储一个链表。jdk1.8后当hash表的单一链表长度超过 8 个的时候，链表结构就会转为红黑树结构；当 hashmap 空间使用达到 0.75 后，会对数组进行扩容，新建数组，然后将元素拷 贝到新的数组中，每次扩容翻倍；在存储元素时有可能发生 hash 碰撞现象（即两个元素不相同，却有一样的 hash 值），这样的话，就将元素在数组中存入链表中，以链表的形式进行元素的存储，第一个entry 存在链表顶端，再有hash 值一致的entry 存入，则链接在第一个元素之后。</p><h3><a name='header-n1417' class='md-header-anchor '></a>1.8：Java 到底是值传递还是引用传递？</h3><p>Java 只支持值传递。
Java 程序员之所以容易搞混值传递和引用传递，主要是因为 Java 有两种数据类型，一种是基本类型，比如说 int，另外一种是引用类型，比如说 String或对象。
基本类型的变量存储的都是实际的值，而引用类型的变量存储的是对象的引用——指向了对象在内存中的地址。值和引用存储在 stack（栈）中，而对象存储在 heap（堆）中。</p><h3><a name='header-n1422' class='md-header-anchor '></a>1.9：== 和equals有什么区别？</h3><p>==：判断两个对象是不是内存中同一个对象。但如果有基本数据类型参与比较，无论是基本数据类型相互比较，还是基本数据和他们的封装类比较，都比较的是值，引用数据类型之间==比较的是内存地址。</p><p>equals()：作用也是判断两个对象是否相等。但它一般有两种使用情况，一种这个类没有重写equals() 方法。则通过 equals() 比较该类的两个对象时，等价于通过“==”比较这两个对象。</p><p>另一种就是类重写了 equals() 方法，重写了之后就按照重写的逻辑来判断了。</p><p>一般，我们都覆盖 equals() 方法来比较两个对象的内容相等；若它们的内容相等，就认为两个对象是相等的。</p><h3><a name='header-n1431' class='md-header-anchor '></a>1.10:java的类加载机制？</h3><p>加载
ClassLoader通过一个类的完全限定名查找此类字节码文件，并利用字节码文件创建一个class对象。</p><p>验证
目的在于确保class文件的字节流中包含信息符合当前虚拟机要求，不会危害虚拟机自身的安全，主要包括四种验证：文件格式的验证，元数据的验证，字节码验证，符号引用验证。</p><p>准备
为类变量（static修饰的字段变量）分配内存并且设置该类变量的初始值，（如static int i = 5 这里只是将 i 赋值为0，在初始化的阶段再把 i 赋值为5)，这里不包含final修饰的static ，因为final在编译的时候就已经分配了。这里不会为实例变量分配初始化，类变量会分配在方法区中，实例变量会随着对象分配到Java堆中。</p><p>解析
这里主要的任务是把常量池中的符号引用替换成直接引用</p><p>初始化
这里是类记载的最后阶段，如果该类具有父类就进行对父类进行初始化，执行其静态初始化器（静态代码块）和静态初始化成员变量。（前面已经对static 初始化了默认值，这里我们对它进行赋值，成员变量也将被初始化）</p><h3><a name='header-n1447' class='md-header-anchor '></a>1.11:java的类加载顺序？</h3><p>1:所有的类都会优先加载基类；
2:静态成员的初始化优先；
3:成员初始化后，才会执行构造方法；</p><p>4:静态成员的初始化与静态块的执行，发生在类加载的时候；成员加载在对象创建时；类对象的以及静态块的访问，都会触发类的加载。</p><h3><a name='header-n1454' class='md-header-anchor '></a>1.12: 手写排序算法？</h3><pre class="md-fences md-end-block" lang="java" style="break-inside: unset;"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 30px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//冒泡排序</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-def">bubbleSort</span>(<span class="cm-variable-3">int</span> []<span class="cm-variable">a</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable-3">int</span> <span class="cm-variable">len</span><span class="cm-operator">=</span><span class="cm-variable">a</span>.<span class="cm-variable">length</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-keyword">for</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">i</span><span class="cm-operator">=</span><span class="cm-number">0</span>;<span class="cm-variable">i</span><span class="cm-operator">&lt;</span><span class="cm-variable">len</span>;<span class="cm-variable">i</span><span class="cm-operator">++</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-keyword">for</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">j</span><span class="cm-operator">=</span><span class="cm-number">0</span>;<span class="cm-variable">j</span><span class="cm-operator">&lt;</span><span class="cm-variable">len</span><span class="cm-operator">-</span><span class="cm-variable">i</span><span class="cm-operator">-</span><span class="cm-number">1</span>;<span class="cm-variable">j</span><span class="cm-operator">++</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-keyword">if</span>(<span class="cm-variable">a</span>[<span class="cm-variable">j</span>]<span class="cm-operator">&gt;</span><span class="cm-variable">a</span>[<span class="cm-variable">j</span><span class="cm-operator">+</span><span class="cm-number">1</span>]){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable-3">int</span> <span class="cm-variable">temp</span><span class="cm-operator">=</span><span class="cm-variable">a</span>[<span class="cm-variable">j</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">a</span>[<span class="cm-variable">j</span>]<span class="cm-operator">=</span><span class="cm-variable">a</span>[<span class="cm-variable">j</span><span class="cm-operator">+</span><span class="cm-number">1</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">a</span>[<span class="cm-variable">j</span><span class="cm-operator">+</span><span class="cm-number">1</span>]<span class="cm-operator">=</span><span class="cm-variable">temp</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//选择排序</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-def">selectSort</span>(<span class="cm-variable-3">int</span>[]<span class="cm-variable">a</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">len</span><span class="cm-operator">=</span><span class="cm-variable">a</span>.<span class="cm-variable">length</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">for</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">i</span><span class="cm-operator">=</span><span class="cm-number">0</span>;<span class="cm-variable">i</span><span class="cm-operator">&lt;</span><span class="cm-variable">len</span>;<span class="cm-variable">i</span><span class="cm-operator">++</span>){<span class="cm-comment">//循环次数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">value</span><span class="cm-operator">=</span><span class="cm-variable">a</span>[<span class="cm-variable">i</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">position</span><span class="cm-operator">=</span><span class="cm-variable">i</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">for</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">j</span><span class="cm-operator">=</span><span class="cm-variable">i</span><span class="cm-operator">+</span><span class="cm-number">1</span>;<span class="cm-variable">j</span><span class="cm-operator">&lt;</span><span class="cm-variable">len</span>;<span class="cm-variable">j</span><span class="cm-operator">++</span>){<span class="cm-comment">//找到最小的值和位置</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span>(<span class="cm-variable">a</span>[<span class="cm-variable">j</span>]<span class="cm-operator">&lt;</span><span class="cm-variable">value</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">value</span><span class="cm-operator">=</span><span class="cm-variable">a</span>[<span class="cm-variable">j</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">position</span><span class="cm-operator">=</span><span class="cm-variable">j</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">a</span>[<span class="cm-variable">position</span>]<span class="cm-operator">=</span><span class="cm-variable">a</span>[<span class="cm-variable">i</span>];<span class="cm-comment">//进行交换</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">a</span>[<span class="cm-variable">i</span>]<span class="cm-operator">=</span><span class="cm-variable">value</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 721px;"></div><div class="CodeMirror-gutters" style="display: none; height: 751px;"></div></div></div></pre><h3><a name='header-n1456' class='md-header-anchor '></a>1.13：设计模式</h3><p>单例模式是保证一个类仅有一个实例，并自行提供访问该实例全局访问点的创建型模式。</p><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 30px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//懒汉式（线程安全）</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Singleton</span> { &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-keyword">private</span> <span class="cm-keyword">static</span> <span class="cm-variable">Singleton</span> <span class="cm-variable">instance</span>; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-keyword">private</span> <span class="cm-variable">Singleton</span> (){} &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-keyword">synchronized</span> <span class="cm-variable">Singleton</span> <span class="cm-variable">getInstance</span>() {<span class="cm-comment">//加线程锁</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">instance</span> <span class="cm-operator">==</span> <span class="cm-atom">null</span>) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">//判断如果没有实例 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">instance</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Singleton</span>(); &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">//新建一个实例</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  } &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-keyword">return</span> <span class="cm-variable">instance</span>; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">//返回实例</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; } &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 261px;"></div><div class="CodeMirror-gutters" style="display: none; height: 291px;"></div></div></div></pre><p>工厂模式是为创建对象提供过渡接口，根据用户需求动态创建实例的设计模式。我们项目中接入短信服务是接入的是厂家或第三方的短信渠道，可以使用如下代码思路去实现工厂模式下发短信验证码</p><pre class="md-fences md-end-block" lang="java" style="break-inside: unset;"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 30px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">interface</span> <span class="cm-def">Phone</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">void</span> <span class="cm-variable">make</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">MiPhone</span> <span class="cm-keyword">implements</span> <span class="cm-variable">Phone</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">MiPhone</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">make</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">make</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// TODO Auto-generated method stub</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"make xiaomi phone!"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">IPhone</span> <span class="cm-keyword">implements</span> <span class="cm-variable">Phone</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">IPhone</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">make</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">make</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// TODO Auto-generated method stub</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"make iphone!"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">PhoneFactory</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">Phone</span> <span class="cm-variable">makePhone</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">phoneType</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span>(<span class="cm-variable">phoneType</span>.<span class="cm-variable">equalsIgnoreCase</span>(<span class="cm-string">"MiPhone"</span>)){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-keyword">new</span> <span class="cm-variable">MiPhone</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">else</span> <span class="cm-keyword">if</span>(<span class="cm-variable">phoneType</span>.<span class="cm-variable">equalsIgnoreCase</span>(<span class="cm-string">"iPhone"</span>)) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-keyword">new</span> <span class="cm-variable">IPhone</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">null</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//测试</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Demo</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-variable">main</span>(<span class="cm-variable-3">String</span>[] <span class="cm-variable">arg</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">PhoneFactory</span> <span class="cm-variable">factory</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">PhoneFactory</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Phone</span> <span class="cm-variable">miPhone</span> <span class="cm-operator">=</span> <span class="cm-variable">factory</span>.<span class="cm-variable">makePhone</span>(<span class="cm-string">"MiPhone"</span>); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// make xiaomi phone!</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">IPhone</span> <span class="cm-variable">iPhone</span> <span class="cm-operator">=</span> (<span class="cm-variable">IPhone</span>)<span class="cm-variable">factory</span>.<span class="cm-variable">makePhone</span>(<span class="cm-string">"iPhone"</span>); &nbsp; &nbsp;<span class="cm-comment">// make iphone!</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 1066px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1096px;"></div></div></div></pre><p>观察者模式：定义了一种一对多的依赖关系，让多个观察者对象同时监听某一个主题对象。这个主题对象在状态上发生变化时，会通知所有观察者对象，使它们能够自动更新自己，我们使用的rabbitmq 中发布订阅（topic）消息类型就是一个典型的观察者模式使用的实例</p><h3><a name='header-n1465' class='md-header-anchor '></a>1.14：jvm虚拟机的内存模型都有哪些？分别都存放那些数据？</h3><p><strong>堆 ：是Java虚拟机内存中最大的一块，此内存区域的唯一目的就是存放</strong>对象实例，几乎所有的对象实例都在这里分配内存。Java堆是垃圾收集器管理的主要区域。被所有的线程共享。</p><p><strong>栈</strong> ：栈中保存基本数据类型的值和对象的引用，每个栈中的数据(原始类型和对象引用)都是私有的，其他栈不能访问，所有的线程不共享。</p><p><strong>本地方法栈</strong>：功能和特点类似于虚拟机栈，是一个java调用非java代码的接口，<strong>作用是与操作系统和外部环境交互</strong></p><p>（如果某个虚拟机实现的本地方法接口是使用C连接模型的话，那么它的本地方法栈就是C栈。当C程序调用一个C函数时，其栈操作都是确定的。传递给该函数的参数以某个确定的顺序压入栈，它的返回值也以确定的方式传回调用者。同样，这就是虚拟机实现中本地方法栈的行为）</p><p><strong>方法区</strong>：又叫静态区，方法区包含所有的class和static变量，运行时常量池都分配在 Java 虚拟机的方法区之中，被所有的线程共享。</p><p><strong>程序计数器</strong>：标示下一条需要执行的指令的位置，分支、循环、跳转、异常处理、线程恢复等基础功能都是依赖程序计数器完成的； 对于Java的多线程程序而言，不同的线程都是通过轮流获得cpu的时间片运行的，这符合计算机组成原理的基本概念，因此不同的线程之间需要不停的获得运行，挂起等待运行，所以各线程之间的计数器互不影响，独立存储。这些数据区属于线程私有的内存</p><p>&nbsp;</p><h3><a name='header-n1480' class='md-header-anchor '></a>1.15 ：GC垃圾回收算法？</h3><p>标记-清除算法</p><p>算法分为2个阶段：1.标记需要回收的对象，2.回收被标记的对象，当进行过标记清除算法之后，内存碎片化比较严重，出现了大量的非连续内存。当java堆需要分配一段连续的内存给一个新对象时仍然需要继续清理以满足“连续空间”的要求。所以说，这种方法比较基础，效率也比较低下。</p><p>复制算法</p><p>它将内存划分为两块相等的大小，每次使用一块，当这一块用完了，就讲还存活的对象复制到另外一块内存区域中，然后将当前内存空间一次性清理掉。这样的对整个半区进行回收，不过这种算法将原有的内存空间减少为实际的一半，代价比较高，内存使用率不高</p><p>标记-整理算法</p><p>与标记清除算法一样，首先是标记对象然后清除，只不过清除后会自动整理内存碎片，将存货的对象向内存一段移动，整理出一块较大的连续内存空间。这样内存使用率高了，也是当前主推使用的GC垃圾回收算法</p><h3><a name='header-n1493' class='md-header-anchor '></a>1.16：jdk1.8有哪写新特性？</h3><ul><li>新增lambda表达式</li><li>Stream API 过滤集合，一下以下代码为辅助理解</li></ul><pre class="md-fences md-end-block" lang="java" style="break-inside: unset;"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 30px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">Product</span><span class="cm-operator">&gt;</span> <span class="cm-def">filterProductByPredicate</span>(<span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">Product</span><span class="cm-operator">&gt;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">list</span>,<span class="cm-variable">MyPredicate</span><span class="cm-operator">&lt;</span><span class="cm-variable">Product</span><span class="cm-operator">&gt;</span> <span class="cm-variable">mp</span>){</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">Product</span><span class="cm-operator">&gt;</span> <span class="cm-variable">prods</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">ArrayList</span><span class="cm-operator">&lt;&gt;</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable">Product</span> <span class="cm-variable">prod</span> : <span class="cm-variable">list</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">mp</span>.<span class="cm-variable">test</span>(<span class="cm-variable">prod</span>)){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">prods</span>.<span class="cm-variable">add</span>(<span class="cm-variable">prod</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">prods</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-def">test2</span>(){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">filterProductByPredicate</span>(<span class="cm-variable">proList</span>, <span class="cm-keyword">new</span> <span class="cm-variable">MyPredicate</span><span class="cm-operator">&lt;</span><span class="cm-variable">Product</span><span class="cm-operator">&gt;</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">boolean</span> <span class="cm-variable">test</span>(<span class="cm-variable">Product</span> <span class="cm-variable">product</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">product</span>.<span class="cm-variable">getPrice</span>() <span class="cm-operator">&lt;</span> <span class="cm-number">8000</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">@Test</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-def">test</span>(){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">proList</span>.<span class="cm-variable">stream</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .<span class="cm-variable">fliter</span>((<span class="cm-variable">p</span>) <span class="cm-operator">-&gt;</span> <span class="cm-variable">p</span>.<span class="cm-variable">getPrice</span>() <span class="cm-operator">&lt;</span><span class="cm-number">8000</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .<span class="cm-variable">limit</span>(<span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .<span class="cm-variable">forEach</span>(<span class="cm-variable">System</span>.<span class="cm-variable">out</span>::<span class="cm-variable">println</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 583px;"></div><div class="CodeMirror-gutters" style="display: none; height: 613px;"></div></div></div></pre><ul><li>接口中的默认方法和静态方法</li><li>新时间日期API
LocalDate | LocalTime | LocalDateTime</li></ul><p>​          表示日期的LocalDate
​          表示时间的LocalTime
​          表示日期时间的LocalDateTime</p><ul><li>函数式接口</li></ul><p>定义了一个抽象方法的接口，就是函数式接口，并且还提供了注解：@FunctionalInterface</p><h3><a name='header-n1520' class='md-header-anchor '></a>1.17：Java多线程创建方式？</h3><p>1、继承 Thread 类</p><p>2、实现 Runnable 接口</p><p>3、实现 Callable 接口</p><p>4、通过线程池获取线程对象，实现多线程</p><h3><a name='header-n1529' class='md-header-anchor '></a>1.18：Java线程的基本状态？</h3><p><strong>新建状态</strong>:</p><p>使用 new 关键字和 Thread 类或其子类建立一个线程对象后，该线程对象就处于新建状态。它保持这个状态直到</p><p>程序 start() 这个线程。</p><p><strong>就绪状态</strong>:</p><p>当线程对象调用了 start()方法之后，该线程就进入就绪状态。就绪状态的线程处于就绪队列中，要等待 JVM 里线</p><p>程调度器的调度。</p><p><strong>运行状态</strong>:</p><p>如果就绪状态的线程获取 CPU 资源，就可以执行 run()，此时线程便处于运行状态。处于运行状态的线程最为复</p><p>杂，它可以变为阻塞状态、就绪状态和死亡状态。</p><p><strong>阻塞状态</strong>:</p><p>如果一个线程执行了 sleep（睡眠）、suspend（挂起）等方法，失去所占用资源之后，该线程就从运行状态进入</p><p>阻塞状态。在睡眠时间已到或获得设备资源后可以重新进入就绪状态。</p><p><strong>死亡状态</strong>:</p><p>一个运行状态的线程完成任务或者其他终止条件发生时，该线程就切换到终止状态。TERMINATED 执行完成</p><h3><a name='header-n1558' class='md-header-anchor '></a>1.19：多线程中的常用方法及含义？</h3><p>start()：开启线程，使线程从新建进入就绪状态</p><p>sleep()：线程睡眠，使当前线程休息, 需要指定睡眠时间，当执行sleep方法后进入阻塞状态,不释放cpu资源</p><p>wait():  当前线程进入等待状态，让出CPU给其他线程，自己进入等待队列，等待被唤醒,释放cpu资源</p><p>notify()：唤醒等待队列中的一个线程，唤醒后会重新进入就绪状态，准备抢夺cpu资源。</p><p>notifyAll()：唤醒等待队列中的所有线程，抢夺cpu资源。</p><p>yield()：让出CPU。当前线程让出CPU给其他的线程执行，但是自己也会进入就绪状态参与CPU的抢夺，因此调用yield方法后，仍然可能   <br/></p><p>​                  继续获得CPU</p><p> join()：加入线程，会将调用的线程加入当前线程。等待加入的线程执行完成后才会继续执行当前线程。</p><h3><a name='header-n1575' class='md-header-anchor '></a>1.20：Java多线程线程池及核心参数？</h3><p><strong>ThreadPoolExecutor()</strong>：是最原始的线程池创建，上面 1-3 创建方式都是对 ThreadPoolExecutor 的封装。</p><p><strong>newSingleThreadExecutor()</strong>：它的特点在于工作线程数目被限制为 1，操作一个无界的工作队列，所以它保证了</p><p>所有任务的都是被顺序执行，最多会有一个任务处于活动状态，并且不允许使用者改动线程池实例，因此可以避免</p><p>其改变线程数目；</p><p><strong>newCachedThreadPool()</strong>：它是一种用来处理大量短时间工作任务的线程池，具有几个鲜明特点：它会试图缓存线</p><p>程并重用，当无缓存线程可用时，就会创建新的工作线程；如果线程闲置的时间超过 60 秒，则被终止并移出缓存；</p><p>长时间闲置时，这种线程池，不会消耗什么资源。其内部使用 SynchronousQueue 作为工作队列；</p><p><strong>newFixedThreadPool(int nThreads)</strong>：重用指定数目（nThreads）的线程，其背后使用的是无界的工作队列，任何</p><p>时候最多有 nThreads 个工作线程是活动的。这意味着，如果任务数量超过了活动队列数目，将在工作队列中等待</p><p>空闲线程出现；如果有工作线程退出，将会有新的工作线程被创建，以补足指定的数目 nThreads；</p><p><strong>newSingleThreadScheduledExecutor()</strong>：创建单线程池，返回ScheduledExecutorService，可以进行定时或周期</p><p>性的工作调度；</p><p><strong>newScheduledThreadPool(int corePoolSize)</strong> ：和newSingleThreadScheduledExecutor()类似 ，创 建的 是个</p><p>ScheduledExecutorService，可以进行定时或周期性的工作调度，区别在于单一工作线程还是多个工作线程；</p><p><strong>newWorkStealingPool(int parallelism)</strong>：这是一个经常被人忽略的线程池，Java 8 才加入这个创建方法，其内</p><p>部会构建 ForkJoinPool，利用 Work-Stealing 算法，并行地处理任务，不保证处理顺序；</p><p>核心参数：</p><ul><li>corePoolSize：线程池的核心线程数</li><li>maximumPoolSize: 线程池最大线程数</li><li>keepAliveTime：空闲线程的存活时间</li><li>unit：空闲线程存活时间单位</li><li>workQueue：线程池等待队列。</li><li>threadFactory：线程工厂，生产线程的类。</li><li>handler：线程拒绝策略。当线程池满的时候，该怎么拒绝后来的线程。</li></ul><h3><a name='header-n1632' class='md-header-anchor '></a>1.21：Java多线程中  Synchronized &amp; volatile理解</h3><p><strong>Synchronized</strong> ：java同步锁，能够保证在同一时刻最多只有一个线程执行该段代码，以达到保证并发安全的效果。</p><p>通过 synchronized 关键字来实现，所有加上synchronized 和 块语句，在多线程访问的时候，同一时刻只能有一个线程能够用</p><p>synchronized 修饰的方法 或者 代码块。</p><p>synchronized锁 底层实现是，它指针指向的是一个monitor对象的起始地址每个对象实例都会有一个 monitor。其中monitor可以与对象一起创建、销毁，当多个线程同时访问一段同步代码时，会先存放到 <em>EntryList 集合中，接下来当线程获取到对象的monitor时，就会把</em>owner变量设置为当前线程。同时count变量+1，来保证在访问时只有一个引用，释放锁时同理count -1 ；</p><p><strong>volatile</strong> ：用volatile修饰的变量，线程在每次使用变量的时候，都会读取变量修改后的最的值。</p><h3><a name='header-n1643' class='md-header-anchor '></a>1.22:线程池的拒绝策略/饱和策略</h3><p>当请求任务不断的过来，而系统此时又处理不过来的时候，我们需要采取的策略是拒绝服务。 四种处理策略：
AbortPolicy(抛出一个异常，默认的)     中止 DiscardPolicy(新提交的任务直接被抛弃)  抛弃
DiscardOldestPolicy（丢弃队列里最老的任务，将当前这个任务继续提交给线程池）  抛弃最旧 CallerRunsPolicy（交给线程池调用所在的线程进行处理，即将某些任务回退到调用者)   调用者运行</p><h3><a name='header-n1648' class='md-header-anchor '></a>1.23 ：锁</h3><h3><a name='header-n1649' class='md-header-anchor '></a>1.24：Java线程的三要素</h3><p>原子性    可见性    有序性</p><h2><a name='header-n1652' class='md-header-anchor '></a>二： spring &amp; springMVC</h2><h3><a name='header-n1653' class='md-header-anchor '></a>2.1: 介绍一下spring？</h3><p>关于Spring的话，我们平时做项目一直都在用，不管是使用ssh还是使用ssm，都可以整合。Spring里面主要的就三点，也就是核心思想，IOC控制反转，DI依赖注入，AOP切面编程</p><p>我先来说说IOC吧，IOC就是spring里的控制反转，把类的控制权呢交给spring来管理，我们在使用的时候，在spring的配置文件中，配置好bean标签，以及类的全路径，如果有参数，然后在配置上相应的参数。这样的话，spring就会给我们通过反射的机制实例化这个类，同时放到spring容器当中去。</p><p>我们在使用的时候，需要结合DI依赖注入使用，把我们想使用的类注入到需要的地方就可以，依赖注入的方式有构造器注入、getset注入还有注解注入。我们现在都使用<code>@autowired</code>或者<code>@Resource</code>注解的方式注入。</p><p>然后就是AOP切面编程，他可以在不改变源代码的情况下对代码功能的一个增强。我们在配置文件中配置好切点，然后去实现切面的逻辑就可以实现代码增强，这个代码增强，包括在切点的执行前，执行中，执行后都可以进行增强逻辑处理，不用改变源代码，这块我们项目中一般用于权限认证、日志、事务处理这几个地方。</p><h3><a name='header-n1662' class='md-header-anchor '></a>2.2 : AOP的实现原理？</h3><p>这块呢，我看过spring的源码，底层就是动态代理来实现的，所谓的动态代理就是说 AOP 框架不会去修改字节码，而是每次运行时在内存中临时为方法生成一个 AOP 对象，这个 AOP 对象包含了 ，目标对象的全部方法，并且在特定的切点做了增强处理，并回调原对象的方法。</p><p>Spring AOP 中的动态代理主要有两种方式，JDK 动态代理和 CGLIB 动态代理： </p><ul><li>JDK 动态代理只提供接口的代理，不支持类的代理。核心InvocationHandler 接口和 Proxy 类，InvocationHandler 通过 invoke()方法反射来调用目标类中的代码，动态地将横切逻辑和业务编织在一起；接着，Proxy 利用InvocationHandler 动态创建一个符合接口的的实例，生成目标类的代理对象。</li><li>如果代理类没有实现 InvocationHandler 接口，那么 Spring AOP 会选择使用 CGLIB 来动态代理目标类。CGLIB（Code Generation Library），是一个代码生成的类库，可以在运行时动态的生成指定类的一个子类对象，并覆盖其中特定方法并添加增强代码，从而实现 AOP。CGLIB 是通过继承的方式做的动态代理，因此如果某个类被标记为 final，那么它是无法使用 CGLIB 做动态代理的。不过在我们的业务场景中没有代理过final的类，基本上都代理的controller层实现权限以及日志，还有就是service层实现事务统一管理</li></ul><h3><a name='header-n1674' class='md-header-anchor '></a>2.3 :  详细介绍下IOC容器</h3><p>Spring 提供了两种 IoC 容器，分别为 BeanFactory 和 ApplicationContext</p><p>BeanFactory 是基础类型的 IoC 容器，提供了完整的 IoC 服务支持。简单来说，BeanFactory 就是一个管理 Bean 的工厂，它主要负责初始化各种 Bean，并调用它们的生命周期方法。</p><p>ApplicationContext 是 BeanFactory 的子接口，也被称为应用上下文。它不仅提供了 BeanFactory 的所有功能，还添加了对 i18n（国际化）、资源访问、事件传播等方面的良好支持。</p><p>他俩的主要区别在于，如果 Bean 的某一个属性没有注入，则使用 BeanFacotry 加载后，在第一次调用 getBean() 方法时会抛出异常，但是呢ApplicationContext 会在初始化时自检，这样有利于检查所依赖的属性是否注入。</p><p>因此，在实际开发中，通常都选择使用 ApplicationContext</p><h3><a name='header-n1685' class='md-header-anchor '></a>2.4：springbean的生命周期？</h3><p>整体来说就4个步骤：实例化bean，属性赋值，初始化bean，销毁bean</p><ul><li>首先就是实例化bean，容器通过获取BeanDefinition对象中的信息进行实例化</li><li>然后呢就是属性赋值，利用依赖注入完成 Bean 中所有属性值的配置注入</li><li>接着就是初始化bean，如果在配置文件中通过 init-method 属性指定了初始化方法，则调用该初始化方法。</li><li>最后就是销毁bean，和init-method一样，通过给destroy-method指定函数，就可以在bean销毁前执行指定的逻辑</li></ul><h3><a name='header-n1701' class='md-header-anchor '></a>2.5： springbean的作用域？</h3><p>Spring 容器中的 bean 可以分为 5 个范围： </p><p>（1）singleton：单例模式，使用 singleton 定义的 Bean 在 Spring 容器中只有一个实例，这也是 Bean 默认的作用域。 controller、service、dao层基本都是singleton的</p><p>（2）prototype：原型模式，每次通过 Spring 容器获取 prototype 定义的 Bean 时，容器都将创建一个新的 Bean 实例。 </p><p>（3）request：在一次 HTTP 请求中，容器会返回该 Bean 的同一个实例。而对不同的 HTTP 请求，会返回不同的实例，该作用域仅在当前 HTTP Request 内有效。 </p><p>（4）session：在一次 HTTP Session 中，容器会返回该 Bean 的同一个实例。而对不同的 HTTP 请求，会返回不同的实例，该作用域仅在当前 HTTP Session 内有效。</p><p>（5）global-session：全局作用域，在一个全局的 HTTP Session 中，容器会返回该 Bean 的同一个实例。</p><h3><a name='header-n1714' class='md-header-anchor '></a>2.6：事务的传播特性？</h3><figure><table><thead><tr><th>属性名称</th><th>值</th><th>描 述</th></tr></thead><tbody><tr><td>PROPAGATION_REQUIRED</td><td>required</td><td>支持当前事务。如果 A 方法已经在事务中，则 B 事务将直接使用。否则将创建新事务，默认就是这个</td></tr><tr><td>PROPAGATION_SUPPORTS</td><td>supports</td><td>支持当前事务。如果 A 方法已经在事务中，则 B 事务将直接使用。否则将以非事务状态执行</td></tr><tr><td>PROPAGATION_MANDATORY</td><td>mandatory</td><td>支持当前事务。如果 A 方法没有事务，则抛出异常</td></tr><tr><td>PROPAGATION_REQUIRES_NEW</td><td>requires_new</td><td>将创建新的事务，如果 A 方法已经在事务中，则将 A 事务挂起</td></tr><tr><td>PROPAGATION_NOT_SUPPORTED</td><td>not_supported</td><td>不支持当前事务，总是以非事务状态执行。如果 A 方法已经在事务中，则将其挂起</td></tr><tr><td>PROPAGATION_NEVER</td><td>never</td><td>不支持当前事务，如果 A 方法在事务中，则抛出异常</td></tr><tr><td>PROPAGATION.NESTED</td><td>nested</td><td>嵌套事务，底层将使用 Savepoint 形成嵌套事务</td></tr></tbody></table></figure><h3><a name='header-n1748' class='md-header-anchor '></a>2.7：事务的隔离级别？</h3><p>Spring 事务的本质其实就是数据库对事务的支持，没有数据库的事务支持，spring是无法提供事务功能的。真正的数据库层的事务提交和回滚是通过 binlog实现的。隔离级别有四种</p><ul><li><p>Read uncommitted (读未提交)：读未提交，允许另外一个事务可以看到这个事务未提交的数据，最低级别，任何情况都无法保证。</p></li><li><p>Read committed (读已提交)：保证一个事务修改的数据提交后才能被另一事务读取，而且能看到该事务对已有记录的更新，可避免脏读的发生。</p></li><li><p>Repeatable read (可重复读)：保证一个事务修改的数据提交后才能被另一事务读取，但是不能看到该事务对已有记录的更新，可避免脏读、不可重复读的发生。 <strong>mysql innerDB  默认隔离级别</strong></p></li><li><p>Serializable (串行化)：一个事务在执行的过程中完全看不到其他事务对数据库所做的更新，可避免脏读、不可重复读、幻读的发生。</p><p>​</p></li></ul><h3><a name='header-n1766' class='md-header-anchor '></a>2.8：spring中都用了哪些设计模式？</h3><p>（1）工厂模式：BeanFactory就是简单工厂模式的体现，用来创建对象的实例；</p><p>（2）单例模式：Bean默认为单例模式。</p><p>（3）代理模式：Spring的AOP功能用到了JDK的动态代理和CGLIB字节码生成技术；</p><p>（4）模板方法：用来解决代码重复的问题。比如. RestTemplate, JmsTemplate, JpaTemplate。</p><p>（5）观察者模式：定义对象键一种一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都会得到通知被制动更新，如Spring中listener的实现–ApplicationListener。</p><h3><a name='header-n1777' class='md-header-anchor '></a>2.9：springMVC的执行流程？</h3><p>1.客户端（浏览器）发送请求，直接请求到DispatcherServlet。</p><p>2.DispatcherServlet根据请求信息调用HandlerMapping，解析请求对应的Handler。</p><p>3.解析到对应的Handler（也就是我们平常说的Controller控制器）。</p><p>4.HandlerAdapter会根据Handler来调用真正的处理器来处理请求和执行相对应的业务逻辑。</p><p>5.处理器处理完业务后，会返回一个ModelAndView对象，Model是返回的数据对象，View是逻辑上的View。</p><p>6.ViewResolver会根据逻辑View去查找实际的View。</p><p>7.DispatcherServlet把返回的Model传给View（视图渲染）。</p><p>8.把View返回给请求者（浏览器）。</p><h3><a name='header-n1794' class='md-header-anchor '></a>2.10：springMVC中的常用注解？</h3><p>@RequestMapping：指定类或者方法的请求路径，可以使用method字段指定请求方式</p><p>@GetMapping、@PostMapping：规定了请求方式的方法的请求路径</p><p>@RequestParam：接收单一参数的</p><p>@PathVariable：用于从路径中接收参数的</p><p>@CookieValue：用于从cookie中接收参数的</p><p>@RequestBody：用于接收js对象的，将js对象转换为Java对象</p><p>@ResponseBody：返回json格式数据</p><p>@RestController：用在类上，等于@Controller+@ResourceBody两个注解的和，一般在前后端分离的项目中只写接口时经常使用，标明整个类都返回json格式的数据</p><p>&nbsp;</p><h3><a name='header-n1813' class='md-header-anchor '></a>2.11：分布式锁解决方案</h3><p>1：基于数据库实现分布式锁；</p><p>基于数据库的实现方式的核心思想是：在数据库中创建一个表，表中包含<strong>方法名</strong>等字段，并在<strong>方法名字段上创建唯一索引</strong>，想要执行某个方法，就使用这个方法名向表中插入数据，成功插入则获取锁，执行完成后删除对应的行数据释放锁。</p><p>2：基于Redis 中setnx的特性来实现方式；</p><p>SETNX key val：当且仅当key不存在时，set一个key为val的字符串，返回1；若key存在，则什么都不做，返回0；</p><p>（1）获取锁的时候，使用setnx加锁，并使用expire命令为锁添加一个超时时间，超过该时间则自动释放锁，锁的value值为一个随机生成的UUID，通过此在释放锁的时候进行判断。</p><p>（2）获取锁的时候还设置一个获取的超时时间，若超过这个时间则放弃获取锁。</p><p>（3）释放锁的时候，通过UUID判断是不是该锁，若是该锁，则执行delete进行锁释放。</p><p>3：基于ZooKeeper的实现方式；</p><p>ZooKeeper是一个为分布式应用提供一致性服务的开源组件，它内部是一个分层的文件系统目录树结构，规定同一个目录下只能有一个唯一文件名。基于ZooKeeper实现分布式锁的步骤如下：</p><p>（1）创建一个目录mylock；
（2）线程A想获取锁就在mylock目录下创建临时顺序节点；
（3）获取mylock目录下所有的子节点，然后获取比自己小的兄弟节点，如果不存在，则说明当前线程顺序号最小，获得锁；
（4）线程B获取所有节点，判断自己不是最小节点，设置监听比自己次小的节点；
（5）线程A处理完，删除自己的节点，线程B监听到变更事件，判断自己是不是最小的节点，如果是则获得锁。</p><p>这里推荐一个Apache的开源库Curator，它是一个ZooKeeper客户端，Curator提供的InterProcessMutex是分布式锁的实现，acquire方法用于获取锁，release方法用于释放锁。</p><p>优点：具备高可用、可重入、阻塞锁特性，可解决失效死锁问题。</p><p>缺点：因为需要频繁的创建和删除节点，性能上不如Redis方式。</p><p>上面的三种实现方式，没有在所有场合都是完美的，所以，应根据不同的应用场景选择最适合的实现方式。</p><p>在分布式环境中，对资源进行上锁有时候是很重要的，比如抢购某一资源，这时候使用分布式锁就可以很好地控制资源。
当然，在具体使用中，还需要考虑很多因素，比如超时时间的选取，获取锁时间的选取对并发量都有很大的影响，上述实现的分布式锁也只是一种简单的实现，主要是一种思想。</p><p><strong>2.12:@Autowred 和 @Resource的区别？</strong> </p><p> @Autowred 默认按照类型注入，如果需要指定名称，搭配@Qualiﬁer;  是Spring提供的注解  <br/></p><p>@Resource 默认按照名称注入，如果指定的名称不存在，按照类型查找； 是JDK自带的注解</p><h2><a name='header-n1855' class='md-header-anchor '></a>三：mybatis &amp; mybatisplus</h2><h3><a name='header-n1856' class='md-header-anchor '></a>3.1： mybatis 的优缺点？</h3><p>Mybatis是一个半ORM（对象关系映射）的持久层框架,它内部封装了JDBC，开发时只需要关注SQL语句本身，不需要花费精力去处理加载驱动、创建连接、创建statement等繁杂的过程,使用时直接编写原生态sql。</p><p>l  优点：</p><p>1：基于SQL语句编程，相当灵活，不会对应用程序或者数据库的现有设计造成任何影响，SQL写在XML里，解除sql与程序代码的耦合，便于统一管理，提供XML标签，支持编写动态SQL语句，并可重用；</p><p>2：很好的与各种数据库兼容；</p><p>3：提供映射标签，支持对象与数据库的ORM字段关系映射，提供对象关系映射标签，支持对象关系组件维护。</p><p>4：与JDBC相比，消除了JDBC大量冗余的代码，不需要手动开关连接，能够与Spring很好的集成</p><p>l  缺点：</p><p>1：SQL语句的编写工作量较大，尤其当字段多、关联表多时，对开发人员编写SQL语句的功底有一定要求；</p><p>2：SQL语句依赖于数据库，导致数据库移植性差，不能随意更换数据库；</p><h3><a name='header-n1875' class='md-header-anchor '></a>3.2: 当实体类中的属性名和表中的字段名不一样 ，怎么办？</h3><p>第一种方法：通过在查询的sql语句中定义字段名的别名，让字段名的别名和实体类的属性名一致；</p><p>第二种方法：通过<resultMap>来映射字段名和实体类属性名的一一对应的关系；</p><p>第三种方法：在实体类通过@Column注解也可以实现；</p><h3><a name='header-n1882' class='md-header-anchor '></a>3.4 ：mybatis 如何执行批量插入?</h3><p>第一种就是普通的xml中insert语句可以写成单条插入，在调用方循环N次;</p><p>第二种是xml中insert语句写成一次性插入一个N条的list，语法如下(核心便签 foreach collection***)&gt;</p><pre class="md-fences md-end-block" lang="xml"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 30px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">sql</span> <span class="cm-attribute">id</span>=<span class="cm-string">"Base_Column_List"</span><span class="cm-tag cm-bracket">&gt;</span> uanme,age,address<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">sql</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">insert</span> <span class="cm-attribute">id</span>=<span class="cm-string">"insertBatch"</span> <span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  insert into person ( <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">include</span> <span class="cm-attribute">refid</span>=<span class="cm-string">"Base_Column_List"</span> <span class="cm-tag cm-bracket">/&gt;</span> ) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  values </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">foreach</span> <span class="cm-attribute">collection</span>=<span class="cm-string">"list"</span> <span class="cm-attribute">item</span>=<span class="cm-string">"item"</span> <span class="cm-attribute">index</span>=<span class="cm-string">"index"</span> <span class="cm-attribute">separator</span>=<span class="cm-string">","</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  (null,#{item.name},#{item.sex},#{item.address})</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">foreach</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">insert</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">insert into person（。。。）values（，，，），（。。。。），（）</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 215px;"></div><div class="CodeMirror-gutters" style="display: none; height: 245px;"></div></div></div></pre><h3><a name='header-n1888' class='md-header-anchor '></a>3.5 :  Mybatis有哪些动态sql？</h3><p>Mybatis动态sql可以在Xml映射文件内，以标签的形式编写动态sql，执行原理是根据表达式的值完成逻辑判断并动态拼接sql的功能。</p><p>Mybatis提供了9种动态sql标签：</p><p>trim、where 、 set 、foreach、if 、choose、when 、otherwise 、bind</p><p><strong>3.6 : MyBatis有哪写标签？</strong></p><p>除了常见的select|insert|update|delete标签之外，还有<resultMap>、<parameterMap>、<sql>、<include>、<selectKey><code>，加上动态sql的9个标签，其中</code><sql><code>为sql片段标签，通过</code><include><code>标签引入sql片段，</code><selectKey>`为不支持自增的主键生成策略标签。</p><h3><a name='header-n1899' class='md-header-anchor '></a>3.7:MyBatis 一级缓存和二级缓存？</h3><p>一级缓存：Mybatis在没有配置的默认情况下，它只开启一级缓存，一级缓存只是相对于同一个SqlSession而言。所以在参数和SQL完全一样的情况下，我们使用同一个SqlSession对象调用一个Mapper方法，往往只执行一次SQL，因为使用SelSession第一次查询后，MyBatis会将其放在缓存中，以后再查询的时候，如果没有声明需要刷新，并且缓存没有超时的情况下，SqlSession都会取出当前缓存的数据，而不会再次发送SQL到数据库；那什么时候会清空呢？我们执行添加,修改,删除操作的时候mybatis会自动清空一级缓存,准确的来说是我们执行commit()事务提交的时候就会清空。</p><p>MyBatis的二级缓存是Application级别的缓存，SqlSessionFactory层面上的二级缓存默认是不开启的，二级缓存的开席需要进行配置，实现二级缓存的时候，MyBatis要求返回的POJO必须是可序列化的。 也就是要求实现Serializable接口，配置方法很简单，只需要在映射XML文件配置就可以开启缓存了，那如何开启呢？参考下方</p><pre class="md-fences md-end-block" lang="xml" style="break-inside: unset;"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 30px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#第一步  全局配置文件 mybatis-configuration.xml 文件中加入如下代码</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--开启二级缓存  --&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">settings</span><span class="cm-tag cm-bracket">&gt;</span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">setting</span> <span class="cm-attribute">name</span>=<span class="cm-string">"cacheEnabled"</span> <span class="cm-attribute">value</span>=<span class="cm-string">"true"</span><span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">settings</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#第二步 其中一中方法： springboot配置开启二级缓存</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mybatis:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  mapper-locations: classpath:mapper/*.xml</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  type-aliases-package: com.example.demo.entity</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  configuration:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  cache-enabled: true</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#第二步 其中第二种方法： mapper接口中用注解</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">@CacheNamespace</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#第三步 </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">让Mapper对应的实例类实现Serializable接口</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">public class Emp implements Serializable{}</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 399px;"></div><div class="CodeMirror-gutters" style="display: none; height: 429px;"></div></div></div></pre><p>&nbsp;</p><h3><a name='header-n1907' class='md-header-anchor '></a>3.8: MyBatis中${} 和#{}的区别？</h3><p>${}是字符串替换占位符，#{}是是预编译参数占位符，</p><p>${}会引起sql注入风险，不安全，xml中避免使用这种方式</p><p>使用#{}可以有效的防止SQL注入，提高系统安全性。</p><h3><a name='header-n1914' class='md-header-anchor '></a>3.9：MyBatis执行原理描述？</h3><p>MyBatis的主要设计目的就是让我们对执行SQL语句时对输入输出的数据管理更加方便，</p><p>他的执行流程包括</p><p>1：读取配置文件，配置文件包含数据库连接信息和Mapper映射文件或者Mapper包路径。</p><p>2：有了这些信息就能创建SqlSessionFactory，SqlSessionFactory的生命周期是程序级,程序运行的时候建立起来,程序结束的时候消亡</p><p>3： SqlSessionFactory建立SqlSession,目的执行sql语句，SqlSession是过程级,一个方法中建立,方法结束应该关闭</p><p>4：当用户使用mapper.xml文件中配置的的方法时，mybatis首先会解析sql动态标签为对应数据库sql语句的形式，并将其封装进MapperStatement对象，然后通过executor将sql注入数据库执行，并返回结果。</p><p>5： 将返回的结果通过映射，包装成java对象。</p><h3><a name='header-n1929' class='md-header-anchor '></a>3.10：MyBatis 和MyBatisPlus的区别？</h3><p>1：mybatisPlus 是对myBatis的增强，提供单表的crud操作，类似myabtis+tkMapper </p><p>2：mybatisPlus内置丰富的条件构造器，比如，查询的QueryWrapper、LambdaQueryWrapper，修改的UpdateWrapper、</p><p>​      ge、gt、le、lt、isNull、isNotNull等条件构造器提供查询</p><h2><a name='header-n1936' class='md-header-anchor '></a>四：springboot &amp; springcloud</h2><h3><a name='header-n1937' class='md-header-anchor '></a>4.1：springboot优点？为什么选用springboot？</h3><p>​     （1）简化配置， 它实现了自动化配置 ；@注解 java反射 </p><p>​    (2)提供maven极简配置，各种便捷的starter启动器；</p><p>​    (3)基于Spring构建，使开发者快速入门，门槛很低；</p><p>​    (4)内置tomcat服务器，SpringBoot可以创建独立运行的应用而不需要依赖于容器；</p><p>​    (5)为微服务SpringCloud奠定了基础，使得微服务的构建变得简单；</p><h3><a name='header-n1948' class='md-header-anchor '></a>4.2：如何理解springboot 的starters ？</h3><p>springboot 就是把众多优秀的框架整合起来，在boot项目通过引入starter启动器来实现开箱即用，因为它的存在，项目的依赖之间的关系对我们来说变的更加简单了</p><h3><a name='header-n1951' class='md-header-anchor '></a>4.3： springboot自动配置原理？</h3><p>springboot项目的核心注解@SpringbootApplication说起了，这个注解包含了三个注解，其中一个是@EnableAutoConfiguration注解，这个注解主要是开启自动配置的，这个注解会&quot;猜&quot;你将如何配置 spring，前提是你已经添加 了 jar 依赖项，比如项目中引入了 spring-boot-starter-web ，这个包里已经添加 Tomcat 和 SpringMVC，这个注解节就会自动假设您在开发一个 web 应用程序并添加相应的 spring 配置，springboot默认有一个spring-boot-autoconfigure包，大多数常用的第三方的配置都自动集成了，像redis、es等，这里边有一个<code>META-INF/spring.factories</code>文件，这里边定义了所有需要加载的bean的全路径，spring会根据反射的原理，创建这些对象，放到IOC容器中，加载时需要的参数，通过JavaConfig的方式加载配置文件中的参数然后创建了对应的对象，这就是自动配置的原理。</p><h3><a name='header-n1954' class='md-header-anchor '></a>4.4：Spring Boot 如何实现全局异常处理？</h3><p>可以使用 <code>@ControllerAdvice</code> 和 <code>@ExceptionHandler</code> 处理全局异常</p><h3><a name='header-n1957' class='md-header-anchor '></a>4.5：Spring boot 核心注解？</h3><p>启动类上面的注解是@SpringBootApplication，它也是 Spring Boot 的核心注解，主要组合包含了以下
3 个注解：
@SpringBootConﬁguration：组合了 @Conﬁguration 注解，实现配置文件的功能。
@EnableAutoConﬁguration：打开自动配置的功能，也可以关闭某个自动配置的选项，如关闭数据源自动配置功能： <br/></p><p>​                @SpringBootApplication(exclude = { DataSourceAutoConﬁguration.class })。
@ComponentScan：Spring组件扫描，从当前类所在的包以及子包扫描，之外的包扫描不到，所以我们在开发的时候，所有的类都在主类的子包下</p><h3><a name='header-n1966' class='md-header-anchor '></a>4.6：spring cloud 的核心组件用到哪些？详细说一下他们各自的作用及请求的流程？</h3><p>我们使用的是springcloudAlibaba系列的，主要使用到gateway网关，作用过滤和路由，通过filter过滤器配置过滤规则，routes路由到不同的微服务上；nacos注册中心，管理服务的注册与发现，同时也作为配置中心来用，把项目中的配置文件统一管理，实现热更改；ribbon负载均衡，应用内的服务集群下可做负载，策略有随机、轮训和权重；feign远程调用，做服务与服务之间的远程调用；sentinel限流与熔断，配置流控规则实现限流，熔断返回托底数据。</p><h3><a name='header-n1969' class='md-header-anchor '></a>4.7：SpringCloud和Dubbo比较，谈谈个人看法？</h3><p>springCloud和Dubbo都是现在主流的微服务架构，SpringCloud是Apache旗下的Spring体系下的微服务解决方案，Dubbo是阿里系的分布式服务治理框架；从技术维度上,个人觉得其实SpringCloud远远的超过Dubbo，,Dubbo本身只是实现了服务治理,而SpringCloud现在以及后续有好多个子项目以后还可能会更多。服务的调用方式Dubbo使用的是RPC远程调用,而SpringCloud使用的是 Rest API,其实更符合微服务官方的定义，服务网关,Dubbo并没有本身的实现,只能通过其他第三方技术的整合,而SpringCloud有gateway路由网关,作为路由服务器,进行消费者的请求分发，SpringCloud还支持断路器等其他组件等。</p><h3><a name='header-n1972' class='md-header-anchor '></a>4.8：spring、springMVC、springboot、springcloud 的区别与联系？</h3><p>Spring是一个生态体系（也可以说是一个技术体系）是集大成者，包括Spring Framework、Spring Boot、Spring Cloud等；</p><p> Springframework框架他们的基础都是Spring 的 ioc和 aop， ioc 提供了依赖注入的容器， aop解决了面向横切面的编程（比如日志、事务），然后在此两者的基础上实现了其他延伸产品的高级功能。</p><p>Spring 最初利用“工厂模式”（DI）和“代理模式”（AOP）解耦应用组件。大家觉得挺好用，于是按照这种模式搞了一个 MVC框架（一些用Spring 解耦的组件），用来开发 web 应用。然后有发现每次开发都写很多样板代码，为了简化工作流程，于是开发出了一些“懒人整合包”（starter），这就是 SpringBoot，</p><p>所以简练的说，spring是一个引擎，springMVC是基于Spring的一个MVC框架，springboot是一套快速开发整合包，Spring Cloud事实上是一整套基于Spring Boot的微服务解决方案。它为开发者提供了很多工具，用于快速构建分布式系统的一些通用模式，例如：注册中心、服务发现、限流、网关、等</p><p>spring是一个生态体系，springframework是一个一站式的轻量级的java开发框架，核心是控制反转（IoC）和面向切面（AOP），针对于开发的WEB层(springMVC)、业务层(IoC)、持久层(jdbcTemplate)等都提供了多种配置解决方案。</p><h3><a name='header-n1983' class='md-header-anchor '></a>4.9：SpringBoot和SpringCloud的区别/关系？</h3><p><strong>关系:</strong> SpringBoot可以离开SpringCloud独立使用开发项目， 但是SpringCloud离不开SpringBoot ，属于依赖的关系 （cloud依赖于boot）</p><p>区别: SpringBoot专注于快速、方便的<strong>开发单个微服务</strong>，SpringCloud关注<strong>全局的服务治理</strong>框架</p><h3><a name='header-n1988' class='md-header-anchor '></a>4.10：feign 和 openfeign 有什么区别？</h3><p>相同点：二都都有服务远程调用的功能</p><p>不同点1、Feign 本身不支持 Spring MVC 的注解，它有一套自己的注解。openfeign 支持springMVC注解，我们springcloud中用的是openfeign</p><h3><a name='header-n1993' class='md-header-anchor '></a>4.11：feign的底层原理？</h3><ul><li>首先通过@EnableFeignCleints注解开启FeignCleint</li><li>根据Feign的规则实现接口，并加@FeignCleint注解</li><li>程序启动后，会进行包扫描，扫描所有的@ FeignCleint的注解的类，并将这些信息注入到ioc容器中。</li><li>当接口的方法被调用，通过jdk的代理，来生成具体的RequesTemplate</li><li>RequesTemplate再生成Request</li><li>Request交给Client去处理，其中Client可以是HttpUrlConnection、HttpClient也可以是Okhttp</li><li>最后Client被封装到LoadBalanceClient类，这个类结合类Ribbon做到了负载均衡。</li></ul><h2><a name='header-n2016' class='md-header-anchor '></a>五：redis &amp; mongodb &amp; mysql</h2><h3><a name='header-n2017' class='md-header-anchor '></a>5.1：redis的数据类型，以及每种数据类型的使用场景？</h3><figure><table><thead><tr><th>类型</th><th>简介</th><th>特性</th><th>场景</th><th>命令</th></tr></thead><tbody><tr><td>String(字符串)</td><td>二进制安全</td><td>可以包含任何数据,比如jpg图片或者序列化的对象,一个键最大能存储512M</td><td>什么都能存</td><td>&nbsp;</td></tr><tr><td>Hash(字典)</td><td>键值对集合,即编程语言中的Map类型</td><td>适合存储对象,并且可以像数据库中update一个属性一样只修改某一项属性值(Memcached中需要取出整个字符串反序列化成对象修改完再序列化存回去)</td><td>存储、读取、修改用户属性</td><td>hset user1 name zhangsan #设值；    hget user1 name #取值；                hkeys user2 #查看所有key；             hvals user2 #查看所有value； hdel user1 name #删除值； hexists user2 age #查看该值是否存在</td></tr><tr><td>List(列表)</td><td>链表(双向链表)</td><td>增删快,提供了操作某一段元素的API</td><td>1、最新消息排行等功能(比如朋友圈的时间线) 2、消息队列</td><td>lpush插入列表左边；rpush：右边；        lrange 0 -1 取所有值      lrem 删除元素</td></tr><tr><td>Set(集合)</td><td>哈希表实现,元素不重复</td><td>1、添加、删除、查找的复杂度都是O(1)  2、为集合提供了求交集、并集、差集等操作</td><td>1、共同好友 2、利用唯一性,统计访问网站的所有独立ip 3、好友推荐时,根据tag求交集,大于某个阈值就可以推荐</td><td>smembers set1 #查看所有值；    sismember set1 aaa #查看是否包含该值； srem set1 bbb #移除元素</td></tr><tr><td>Sorted Set(有序集合)</td><td>将Set中的元素增加一个权重参数score,元素按score有序排列</td><td>数据插入集合时,已经进行天然排序</td><td>1、排行榜 2、带权重的消息队列</td><td>zadd score 50 zhangsan #存值； zrange score 0 -1 #取值； zrem score lisi #移除元素</td></tr></tbody></table></figure><h3><a name='header-n2055' class='md-header-anchor '></a>5.2:Redis持久化机制?</h3><p>RDB 和AOF两种方式<br/></p><p>RDB持久化机制</p><p>对Redis中的数据执行周期性的持久化,持久化方式为通过快照的方式持久化</p><p>AOF机制</p><p>将每条写命令作为日志，以append-only模式写入一个日志文件，在Redis重启时，通过回放日志中的写入指令来重构整个数据，</p><p>我们项目用的是使用RDB的方式</p><h3><a name='header-n2068' class='md-header-anchor '></a>5.3： 缓存穿透、缓存击穿、缓存雪崩、缓存预热、缓存同步？</h3><ul><li>缓存穿透：</li></ul><p>缓存穿透是指用户查询数据，在数据库没有，自然在缓存中也不会有。这样就导致用户查询的时候，在缓存中找不到，每次都要去数据库再查询一遍，然后返回空，这就相当于进行了两次无用的查询。像这样请求就绕过缓存直接查数据库，这也是经常提的缓存命中率问题</p><p>解决办法</p><p>最常见的则是采用布隆过滤器，将所有可能存在的数据哈希到一个足够大的bitmap中，一个一定不存在的数据会被这个bitmap拦截掉，从而避免了对底层存储系统的查询压力。另外也有一个更为简单粗暴的方法，如果一个查询返回的数据为空，不管是数据不存在，还是系统故障，我们仍然把这个空结果进行缓存，但它的过期时间会很短，最长不超过五分钟。</p><ul><li>缓存击穿：</li></ul><p>是指一个key非常热点，在不停的扛着大并发，大并发集中对这一个key不停进行访问，当这个key在失效的瞬间，持续的大并发就穿破缓存，直接请求数据库，就像在一个屏障上凿开了一个洞.</p><p>解决办法</p><p>1：设置热点key永不过期，2：设置redis分布式锁</p><ul><li>缓存雪崩</li></ul><p>是指在某一个时间段，缓存集中过期失效，比方说：我们设置缓存时采用了相同的过期时间，在同一时刻出现大面积的缓存过期，所有原本应该访问缓存的请求都去查询数据库了，而对数据库CPU和内存造成巨大压力，严重的会造成数据库宕机。从而形成一系列连锁反应，造成整个系统崩溃。</p><p>解决办法：</p><p>一个简单方案就是缓存失效时间分散开，不设置固定的实效时间，采用随机失效的策略来解决。</p><p>最多的解决方案就是锁，或者队列的方式来保证不会有大量的线程对数据库一次性进行读写，从而避免失效时大量的并发请求落到底层存储系统上</p><ul><li>缓存预热：</li></ul><p>缓存预热就是系统上线后，将相关的缓存数据直接加载到缓存系统。这样就可以避免在用户请求的时候，先查询数据库，然后再将数据缓存的问题！用户直接查询事先被预热的缓存数据！</p><p>操作方式：</p><p>1、直接写个缓存刷新页面，上线时手工操作下；</p><p>2、数据量不大，可以在项目启动的时候自动进行加载；</p><ul><li>缓存更新：</li></ul><p>1、定时去清理过期的缓存；</p><p>2.、当有用户请求过来时，再判断这个请求所用到的缓存是否过期，过期的话就去底层系统得到新数据并更新缓存</p><p>&nbsp;</p><h3><a name='header-n2123' class='md-header-anchor '></a>5.4： redis集群？</h3><p>Redis本身就支持集群操作redis_cluster，集群至少需要3主3从，且每个实例使用不同的配置文件，主从不用配置，集群会自己选举主数据库和从数据库，为了保证选举过程最后能选出leader，就一定不能出现两台机器得票相同的僵局，所以一般的，要求集群的server数量一定要是奇数，也就是2n+1台，并且，如果集群出现问题，其中存活的机器必须大于n+1台，否则leader无法获得多数server的支持，系统就自动挂掉。所以一般是3个或者3个以上的奇数节点。</p><p>Redis 2.8中提供了哨兵工具来实现自动化的系统监控和故障恢复功能。哨兵的作用就是监控redis主、从数据库是否正常运行，主数据库出现故障自动将从数据库转换为主数据库</p><p>我们公司搭建的redis集群是用的ruby脚本配合搭建的，我们一共搭建了6台服务器，3主3备，他们之间通信的原理是有一个乒乓协议进行通信的，我再给你说下一他们往里存储数据的机制吧，其实这个redis搭建好集群以后每个节点都存放着一个hash槽，每次往里存储数据的时候，redis都会根据存储进来的key值算出一个hash值，通过这个hash值可以判断到底应该存储到哪一个哈希槽中，取的时候也是这么取的，这就是我了解的redis集群</p><h3><a name='header-n2130' class='md-header-anchor '></a>5.5： redis分布式锁？</h3><p>这个分布式锁这里，我们原来传统的项目都在单台服务器上部署用java里的锁synchronized这个同步锁就行，但是他这个是针对对象的锁，但是我们分布式的项目需要把项目部署到多台服务器上，每台服务器的对象都不同，所以就得考虑用分布式锁，这块实现起来也比较简单，其实这个锁就是redis中的一个key-value的一对值，在使用的时候吧，首先使用setnx方法进行尝试加锁，并可以设置过期时间，如果返回1则代表加锁成功，然后立即对这个锁设置一个失效时间，防止服务宕机，锁一致存在，在处理完业务逻辑之后，删除锁就行了，其他线程就可以获取锁进行业务了</p><h3><a name='header-n2133' class='md-header-anchor '></a>5.6：MongoDB和redis 有什么区别？</h3><p>1、内存管理机制：Redis数据全部存在内存，定期写入磁盘，MongoDB数据存在磁盘，由 linux系统 mmap 实现，当内存不够时，只将热点数据放入内存，其他数据存在磁盘</p><p>2：支持的数据结构：Redis 支持的数据结构丰富，包括hash、set、list等。MongoDB数据结构比较单一，但是支持丰富的数据表达，索引，最类似关系型数据库，支持的查询语言非常丰富。</p><p>3：性能：mongodb依赖内存，TPS较高；Redis依赖内存，TPS非常高。性能上Redis优于MongoDB。</p><p>4：事务支持情况：Redis事务支持比较弱，只能保证事务中的每个操作连续执行；mongodb不支持事务。</p><h3><a name='header-n2142' class='md-header-anchor '></a>5.7 : mysql索引都有哪些？如何创建索引？</h3><p>MySQL的索引有两种分类方式：逻辑分类和物理分类。</p><p>按照逻辑分类，索引可分为：</p><p>主键索引：一张表只能有一个主键索引，不允许重复，不允许为null；</p><p>唯一索引：数据列不允许重复，允许为NULL值，一张表可有多个唯一索引，但是一个唯一索引只能包含</p><p>一列，比如身份证号码，卡号都可以作为唯一索引；</p><p>普通索引：一张表可以创建多个普通索引，一个普通索引可以包含多个字段，允许数据重复，允许NULL值插入；</p><p>全文索引：让搜索关键词更高效的一种索引；</p><p>按照物理分类，索引可分为：</p><p>聚集索引：一般是表中的主键索引，如果表中没有显示指定主键，则会选择表中的第一个不允许为NULL的唯一索引，</p><p>如果还是没有的画，就采用Innodb存储引擎为每行数据内置的6字节rowid作为聚集索引。每张表只有一个聚集索引，</p><p>因为聚集索引的兼职的逻辑顺序决定了表中相应行的物理顺序。聚集索引在精确查找和范围查找方面有良好的性能表</p><p>现（相对于普通索引和全表扫描），聚集索引就显得弥足珍贵，聚集索引选择还是要慎重（一般不会让没有语义的自增</p><p>id充当聚集索引）；</p><p>非聚集索引：该索引中索引的逻辑顺序与磁盘上行的物理存储顺序不同（非主键的那一列），一个表中可以拥有多个非聚集</p><p>索引；</p><p>创建主键索引</p><p>alter table t add primary key add(<code>id</code>)</p><p>创建唯一索引</p><p>alter table t add unique(<code>username</code>)</p><p>创建普通索引</p><p>alter table t add indexindex_name(<code>username</code>)</p><p>创建全文索引</p><p>alter table t add fulltext (<code>username</code>)</p><p><strong>5.8 : mysql搜索引擎知道哪些？有什么区别？默认搜索引擎是什么？</strong></p><p>我了解到的数据库搜索引擎有MyISAM、InnoDB、BDB、MEMORY等，对于 MySQL 5.5 及更高版本，默认的存储引擎是 InnoDB。在 5.5 版本之前，MySQL 的默认存储引擎是 MyISAM，</p><p><strong>mysql中事务隔离级别 读未提交，读已提交，可重复读，串行化四个！默认是可重复读，</strong>我们在项目中一般用<strong>读已提交(Read Commited)</strong>这个隔离级别</p><p>•      InnoDB 存储引擎：</p><p>o      支持自增长列（auto_increment），自增长列的值不能为空，如果在使用的时候为空的话就会从现有的最大值自动+1，如果有但是比现在的还大，则就保存这个值。</p><p>o      支持外键（foreignkey），外键所在的表称为子表而所依赖的表称为父表。</p><p>o      支持事务，回滚以及系统崩溃的修复能力，并且支持多版本并发控制的事务安全。</p><p>o      支持mvcc（多版本并发控制）的行级锁，就是通过多版本控制来实现的乐观锁</p><p>o      索引使用的是B+Tree</p><p>优缺点：InnoDB的优势在于提供了良好的事务处理、崩溃修复能力和并发控制。缺点是读写效率较差，占用的数据空间相对较大。</p><p>•      MyISAM 存储引擎 </p><p>不支持事务、支持表级锁</p><p>支持全文搜索</p><p>缓冲池只缓存索引文件，</p><p>不缓存数据文件 MyISAM 存储引擎表由数据文件（MYD）和索引文件（ MYI）组成</p><p>我们项目中常用到的是innoDB，InnoDB存储引擎提供了具有提交、回滚和崩溃恢复能力的事务安全，但是对比Myisam的存储引擎InnoDB写的处理效率差一些并且会占用更多的磁盘空间以保留数据和索引。</p><p><strong>5.9: mysql如何查看索引是否生效？</strong></p><p>使用 explain 执行计划查看在sql前面加入关键字explain 查询出的结果查看type类型检查是否有执行索引</p><p>举例：EXPLAIN select * from table where id=2;我们一般优化sql语句的话，type级别都要至少达到ref级别，就是每次查询必须要使用索引</p><p>explain之后返回的列 type字段描述</p><p>type类型字段</p><p>All：最坏的情况,全表扫描</p><p>Index：和全表扫描一样。只是扫描表的时候按照索引次序进行。</p><p>主要优点就是避免了排序, 但是开销仍然非常大。</p><p>Range：范围扫描，一个有限制的索引扫描。key 列显示使用了哪个索引。</p><p>当使用=、 &lt;&gt;、&gt;、&gt;=、&lt;、&lt;=、IS NULL、&lt;=&gt;、BETWEEN 或者 IN 操作符,</p><p>用常量比较关键字列时,可以使用 range</p><p>Ref：一种索引访问，它返回所有匹配某个单个值的行。此类索引访问只有当使用非唯一性索引或唯一性索引非唯一性前缀时才会发生。</p><h3><a name='header-n2245' class='md-header-anchor '></a>5.10: mysql查询语句优化？</h3><p>对查询进行优化，应尽量避免全表扫描，首先应考虑在 where 及 order by 涉及的列上建立索引。</p><p>•      应尽量避免在 where 子句中使用is not null或&lt;&gt;操作符，否则引擎将放弃使用索引而进行 全表扫描。</p><p>•      应尽量避免在 where 子句中对字段进行 null值判断，否则将导致引擎放弃使用索引而进行全表扫描，如： select id from t where num is null 可以在 num 上设置默认值 0，确保表中 num 列没有 null 值，然后这样查询:selectid from t where num=0 </p><p>•      应尽量避免在 where 子句中使用 or 来连接条件，否则将导致引擎放弃使用索引 而进行全表扫描，如：select id from t where num=10 or num=20 ，可以使用可以这样查询： select id from t where num=10 union all select id from t where num=20</p><p>•      以%开头的模糊查询也会导致全表扫描： select id from t where name like &#39;%abc%&#39;，如果要提高效率的话，可以考虑全文检索来解决。 </p><p>•      in 和 not in 也要慎用，否则会导致全表扫描，如： select id from t where num in(1,2,3) 对于连续的数值，能用 between 就不要用 in 了： select idfrom t where num between 1 and 3</p><p>•      应尽量避免在 where 子句中对字段进行表达式操作，这将导致放弃使用索引 而进行全表扫描。如：selectid from t where num/2=100应改为: select id from t where num=100*2</p><p>•      应尽量避免在 where 子句中对字段进行函数操作，这将导致引擎放弃使用索引而 进行全表扫描。</p><h3><a name='header-n2262' class='md-header-anchor '></a>5.11： mysql存储过程和视图？</h3><p>存储过程：存储程序是被存储在服务器中的组合SQL语句，经编译创建并保存在数据库中，用户可通过存储过程的名字调用执行。存储过程核心思想就是数据库SQL语言层面的封装与重用性。使用存储过程可以较少应用系统的业务复杂性，但是会增加数据库服务器系统的负荷，所以在使用时需要综合业务考虑。</p><p>视图：视图本身是一张虚拟表，不存放任何数据。在使用SQL语句访问视图的时候，获取的数据是MySQL从其它表中生成的，视图和表在同一个命名空间（因为表和视图共享数据库中相同的名称空间，因此，数据库不能包含具有相同名称的表和视图）。视图查询数据相对安全，视图可以隐藏一些数据和结构，只让用户看见权限内的数据，使复杂的查询易于理解和使用。</p><h3><a name='header-n2267' class='md-header-anchor '></a>5.12： mysql行转列与列转行？</h3><p>mysql中行转列我们用的是内部函数实现过，函数是cast  when then else end 这种</p><p>列转行使用 union 关键字  把多个select语句结果捏合到一个结果来实现</p><h3><a name='header-n2272' class='md-header-anchor '></a>5.13： 分库分表中解释一下垂直和水平2种不同的拆分？</h3><p>垂直拆分：是将单表，或者是有关联的表放在一个数据库，把原有的一个数据库拆分成若干个数据库。</p><p>水平拆分：是将一个很大的表，通过取模，按照日期范围等等拆分成若干个表.</p><h3><a name='header-n2277' class='md-header-anchor '></a>5.14 : 分库分表中垂直分库方案会带来哪些问题？</h3><p>垂直分库如果没有按照合理的业务逻辑去拆分，后期会带来跨库join，分布式事务等；</p><p>跨库join会导致查询性能低下，分布式事务下会导致因数据不一致造成很多脏数据的存在。</p><h3><a name='header-n2282' class='md-header-anchor '></a>5.15： 搭建mycat的核心配置文件有哪些？</h3><p>schema.xml，配置逻辑库表，分片和读写分离</p><p>rule.xml，具体的分片规则和分片算法</p><p>server.xml，配置默认的数据库和用户，表权限</p><h3><a name='header-n2289' class='md-header-anchor '></a>5.16 :  什么叫垂直切分？什么叫混合切分？项目中有没有可能只用水平切分？</h3><p>垂直拆分是将同样的系统按照应用场景(调用方)进行拆分。</p><p>比如一个交易系统的支付模块，上游有用户支付和商家支付两个调用流程。按照垂直拆分的规则就可以将支付模块拆分为用户支付和商家支付。</p><p>混合切分：项目组中如果有水平切分，那项目组里的开发方式就叫混合切分。或者项目组里就是单纯的垂直切分。</p><h3><a name='header-n2296' class='md-header-anchor '></a>5.17：数据库设计三范式</h3><p>第一范式：每个列都不可以再拆分。
第二范式：在第一范式的基础上，非主键列完全依赖于主键，而不能是依赖于主键的一部分。
第三范式：在第二范式的基础上，非主键列只依赖于主键，不依赖于其他非主键。
在设计数据库结构的时候，要尽量遵守三范式，如果不遵守，必须有足够的理由。比如性能。事实上我
们经常会为了性能而妥协数据库的设计。</p><p><strong>六：rabbitmq &amp; kafka</strong></p><p><strong>6.1: rabbitmq的特性及为什么要使用？</strong></p><p>特性：</p><ul><li><p>消息确认机制 (自动确认和手动确认) 默认使用自动确认</p><ul><li>自动确认: acknowledge=&#39;none&#39;</li><li>手动确认: acknowledge=&#39;manual&#39;</li></ul></li><li><p>持久化 </p><ul><li>交换器持久化、队列持久化和消息的持久化</li></ul></li><li><p>过期时间（TTL）</p><ul><li>跟Redis的过期时间一样</li></ul></li></ul><p>为什么要使用：</p><ul><li>异步处理  : 调用者无需等待
将不需要同步处理的并且耗时长的操作由消息队列通知消息接收方进行异步处理。提高了应用程序的响应时间</li><li>应用程序<strong>解耦合 </strong> : 解决了系统之间耦合调用的问题
MQ相当于一个中介，生产方通过MQ与消费方交互，它将应用程序进行解耦合。</li><li>削峰 : 抵御洪峰流量，保护了主业务
并发量大的时候，所有的请求直接怼到数据库，造成数据库连接异常.
比如:
在下单的时候就会往数据库写数据,但是在高峰期时候，并发量会突然激增,这时候直接访问数据库数据库会卡死. 这时候可以通过mq将消息保存起来,然后按照自己的消费能力来消费,这样慢慢写入数据库。</li></ul><p><strong>6.2：如何保证数据一定被发送？</strong></p><p>使用本地消息表(mysql)和定时任务(quartz)和MQ的响应机制（ComfirmFallback，ReturnFallback）</p><p>在发送消息时,在本地的mysql数据库中进行记录一条待发送信息.一个定时任务不断检查，是否发送成功，如果发送成功，将记录状态修改.如果发送失败者再次发送</p><p><strong>6.3： rabbitmq如何保证消息不丢失？保证数据一定会被消费，如何保证？(两者一个意思)</strong></p><p>RabbitMQ中，消息丢失可以简单的分为三种：生产者丢失消息,消费者丢失消息和消息队列丢失消息</p><h6><a name='header-n2361' class='md-header-anchor '></a>生产者丢失消息</h6><p><strong>解决方案:</strong> 从生产者弄丢数据这个角度来看，RabbitMQ提供transaction和confirm模式来确保生产者不丢消息</p><h6><a name='header-n2364' class='md-header-anchor '></a>消息队列丢失消息</h6><p><strong>解决方案:</strong> 消息持久化。durable设置为true</p><h6><a name='header-n2367' class='md-header-anchor '></a>消费者丢失消息</h6><p><strong>解决方案:</strong> </p><p>设置为手动ack确认机制，当消费者出现异常或者服务宕机时，MQ服务器不会删除该消息，而是会把消息重发给绑定该队列的消费者，</p><p>消息不重复消费</p><p>解决方案：使用本地消息去重表，每次消费先到表中查询是否消费的标识，如果消费过就直接ack回滚。</p><p><strong>6.4： rabbitmq实现数据同步后,消费者挂掉这么办,回滚代码这么实现？</strong></p><p>实现ReturnCallback接口重写returnedMessage方法，回滚发送方数据同步操作，具体回滚可以读取发送方记录表中业务ID然后进行回退操作。</p><p><strong>6.5: 消息堆积是如何产生,如何解决消息堆积?</strong></p><p>当消息生产的速度长时间，远远大于消费的速度时。就会造成消息堆积,比如</p><ul><li><p>生产者突然大量发布消息</p></li><li><p>消费者挂掉
解决</p><ul><li>增加消费者的多线程处理</li><li>增加多个消费者</li></ul></li></ul><p><strong>6.6: rabbitmq常用的消息模式？</strong></p><p>RabbitMQ工作模式：</p><p><strong>1、简单模式 HelloWorld</strong><br/></p><p>​    一个生产者、一个消费者</p><p><strong>2、工作队列模式 Work Queue</strong>  <br/></p><p>​    一个生产者、多个消费者（竞争关系）</p><p><strong>3、发布订阅模式 Publish/subscribe</strong>  <br/></p><p>​    需要设置类型为fanout的交换机，并且交换机和队列进行绑定，当发送消息到交换机后，交换机会将消息发送到绑定的队列</p><p><strong>4、路由模式 Routing</strong>  <br/></p><p>​    需要设置类型为direct的交换机，交换机和队列进行绑定，并且指定routing key，当发送消息到交换机后，交换机会根据routing key将消息发送到对应的队列</p><p><strong>5、通配符模式 Topic</strong>  <br/></p><p>​    需要设置类型为topic的交换机，交换机和队列进行绑定，并且指定通配符方式的routing key，当发送消息到交换机后，交换机会根据routing key将消息发送到对应的队列</p><h3><a name='header-n2423' class='md-header-anchor '></a>6.7: rabbitmq什么时候变成死信队列？</h3><ul><li>消息拒绝并且没有设置重新入队</li><li>消息过期</li><li>消息堆积，并且队列达到最大长度，先入队的消息会变成DLX   死信队列交换机 </li></ul><h3><a name='header-n2434' class='md-header-anchor '></a>6.8：kafka中的broker 是干什么的</h3><p>broker 是消息的代理，Producers往Brokers里面的指定Topic中写消息，Consumers从Brokers里面拉取指定Topic的消息，然后进行业务处理，broker在中间起到一个代理保存消息的中转站</p><h3><a name='header-n2437' class='md-header-anchor '></a>6.9：kafka中的 zookeeper 起到什么作用，可以不用zookeeper么</h3><p>zookeeper 是一个分布式的协调组件，早期版本的kafka用zk做meta信息存储，consumer的消费状态，group的管理以及 offset的值。考虑到zk本身的一些因素以及整个架构较大概率存在单点问题，新版本中逐渐弱化了zookeeper的作用。新的consumer使用了kafka内部的group coordination协议，也减少了对zookeeper的依赖，</p><p>但是broker依然依赖于ZK，zookeeper 在kafka中还用来选举controller 和 检测broker是否存活等等。</p><h3><a name='header-n2442' class='md-header-anchor '></a>6.10：kafka 为什么那么快</h3><p>顺序写 由于现代的操作系统提供了预读和写技术，磁盘的顺序写大多数情况下比随机写内存还要快。</p><p>Zero-copy 零拷技术减少拷贝次数</p><p>Batching of Messages 批量量处理。合并小的请求，然后以流的方式进行交互，直顶网络上限。</p><p>Pull 拉模式 使用拉模式进行消息的获取消费，与消费端处理能力相符。</p><h2><a name='header-n2451' class='md-header-anchor '></a>七：docker &amp; linux</h2><h3><a name='header-n2452' class='md-header-anchor '></a>7.1：linux常用命令</h3><p>除pwd、cd、ls、vim、tar -zxcf、unzip 等这些太low的入门级命令外</p><p>查看僵尸进程</p><p>ps -ef | grep java (先查java进程ID)</p><p>kill -9  PID(生产环境谨慎使用)</p><p>查看日志</p><p>ps    -ef | grep  &#39;日志关键字&#39;  --color      以红色字样筛选过滤打印日志中关键字</p><p>tail /cat   -n  10  test.log   查询日志尾部最后10行的日志;</p><p>tail -100f  test.log      实时监控100行日志；</p><p>tail -f grep test.log    打印实时日志</p><p>head -n 10  test.log   查询日志文件中的头10行日志;</p><p>head -n -10  test.log   查询日志文件除了最后10行的其他所有日志;</p><h3><a name='header-n2475' class='md-header-anchor '></a>7.2：docker中基本命令</h3><p>docker search  xxx   在docker容器中搜索xxx镜像</p><p>docker pull  拉取镜像到docker容器</p><p>docker run -it    安装并运行拉取的容器</p><p>docker ps -a  查看docker中运行的容器</p><p>docker stop  xxxx   停止docker容器中某个镜像</p><p>docker start  xxxx   启动docker容器中某个镜像</p><p>docker exec -it   xxxx  /bin/bash   进入docker容器中某个镜像 exit</p><h3><a name='header-n2490' class='md-header-anchor '></a>7.3：Dockerfile中最常见的指令是什么？</h3><p>Dockerfile中包括FROM、MAINTAINER、RUN、CMD、EXPOSE、ENV、ADD、COPY、ENTRYPOINT、VOLUME等10个指令。</p><p>1.FROM</p><p>格式为FROM image或FROM image:tag，并且Dockerfile中第一条指令必须是FROM指令，且在同一个Dockerfile中创建多个镜像时，可以使用多个FROM指令。</p><p>&nbsp;</p><p>2.MAINTAINER</p><p>格式为MAINTAINER user_name user_email，指定维护者信息</p><p>3.RUN</p><p>格式为RUN command或 RUN[&quot;EXECUTABLE&quot;,&quot;PARAM1&quot;,&quot;PARAM2&quot;.....]，前者在shell终端中运行命令，/bin/sh-c command，例如：/bin/sh -c &quot;echo hello&quot;；后者使用exec执行，指定其他运行终端使用RUN[&quot;/bin/bash&quot;,&quot;-c&quot;,&quot;echohello&quot;]</p><p>每条RUN指令将当前的镜像基础上执行指令，并提交为新的镜像，命令较长的时候可以使用\来换行。</p><p>4.CMD</p><p>支持三种格式：</p><p>CMD[&quot;executable&quot;,&quot;param1&quot;,&quot;param2&quot;]，使用exec执行，这是推荐的方式。</p><p>CMD command param1 param2 在/bin/sh中执行。</p><p>CMD[&quot;param1&quot;,&quot;param2&quot;] </p><p>提供给</p><p>ENTERYPOINT</p><p>的默认参数。</p><h2><a name='header-n2525' class='md-header-anchor '></a>八：电商项目</h2><h3><a name='header-n2526' class='md-header-anchor '></a>8.1:用户单点登录</h3><p>我们项目是前后台分离的，前端登录方式分为两种，一种是通过手机号获取验证码登录，一种是通过第三方方式登录，但是在后台我们登录的方式是一致的，都是通过使用一个鉴权框架，jwt来完成登录，当用户信息经过网关后首先先校验用户的合法性，就是去数据库查看是否存在该用户，校验信息合法后我们使用jwt来生成一个用户token，在jwt载荷部分我们保存用户的userid 和时间戳来进行加密，加密的方式是采用的非对称加密RSA方式，使用公钥加密，最后把这个token值以接口响应结果的方式返回给前端，前端用户下次使用用户信息时，他们会在请求头把这个token携带过去请求接口，网关层使用私钥的方式进行解密，解密后得到载荷部分的userid；然后就可以调用其他需要用户信息的接口了，这个是用户登录和校验用户登录信息的过程。</p><p>手机号获取验证码登录，我们用的是阿里的短信服务，前端调用发送短信接口，我们先生成一个6位随机码，并存入redis，key为用户手机号，value为验证码，有效期为5分钟，然后调用阿里短信服务，用户收到短信后用输入的短信内容和redis 中的验证码比较，相同则登录，不相同则提示验证码有误或过期。</p><p>三方登录，我们目前就接入一个微信登录，登录调起微信客户端后 前端把微信的appid作为请求参数发送到后台接口，接口需要先使用该appid去调用微信开发平台一个授权的接口，授权成功后微信会给一个sign标识，其次再调用获取微信用户信息接口，同时携带appid、sign作为参数请求微信开放平台，微信校验成功后会返回一个加密处理后的用户信息，我们使用微信的sdk进行解密，得到用户头像。昵称。手机号，然后用手机号再去匹配用户的合法性，通过后就走上面的用户登录流程了。</p><p>这里面有个问题就是jwt 生成的token有效期的问题，</p><ol start='' ><li>登录成功后将用户生成的 <code>token</code> 作为key、value存储到缓存里面 (这时候key、value值一样)，将缓存有效期设置为 token有效时间的2倍。</li><li>当该用户再次请求时，通过后端的一个 <code>jwt Filter</code> 校验<strong>前端token</strong>是否是有效token,如果<strong>前端token</strong>无效表明是非法请求，直接抛出异常即可 </li><li>根据规则取出缓存 token，判断缓存 token是否存在，不存在
这种情况表明该用户账户空闲超时，返回用户信息已失效，请重新登录</li><li>token 存在，则需要<strong>使用jwt工具类验证该 token 是否过期超时</strong>，不过期无需处理。
过期则表示该用户一直在操作只是token失效了，后端会给token对应的key映射的value值重新生成jwt token并覆盖value值，该缓存生命周期重新计算。</li></ol><h3><a name='header-n2550' class='md-header-anchor '></a>8.2：搜索功能（基于es索引库搜索）</h3><p>搜索是采用elasticsearch实现，在app首页搜索框查询使用，因为前期我们sku、spu信息都是存在mysql数据库，在做初始化的时候运营后台我们通过一键导入的功能批量把mysql中有效的数据全部查询出来通过循环的方式逐条导入到es索引库，如果有单条更新的情况时，我们是在运营后台跟新一条数据，同时把跟新的sku的skuid作为值通过rabbitmq发送到队列，在消费端得到队列值后根据skuid查询完整信息后单条跟新到es库，es是支持根据id进行update；在es库中的映射字段我们使用ik分词器分词，像商品名称、分类名称、品牌名称、描述信息都是进行分词的，在搜索时通过倒排索引的方式，从分词列表查询到对应的数据；在项目中我们使用的es是6.0版本的，具体小版本号记不清了，boot项目在pom中 引用 elasticsearch的依赖，在service层  autowire  客户端   resetHighLeverClient 来操作，查询使用search方法 ，条件构造 使用  SearchSourceBuilder 、BoolQueryBuilder、MatchQueryBuilder、TermQueryBuilder这些就构造，最后查询出来的结果我们自己分装到一个map中，在controller层通过@responseBody 注解 把结果以json串的方式返回给前端，这是我们搜索功能实现的大致流程、</p><p>1：倒排索引的问题</p><p>2：es集群，生产环境没做过，测试环境是2个集群，各5个主分片和5个副本分片，且分布式在两个不同的节点上</p><p>3：es的查询方式  math、match_all、term、terms、bool、filter</p><h3><a name='header-n2559' class='md-header-anchor '></a>8.3：静态化处理商品详情页</h3><p>商品详情页和数据库交互查询的东西比较多，比如有分类的信息、sku的信息、spu的信息、商品规格、商品的描述等，为了减轻数据库的访问压力，提高系统的响应性能，我们把详情页使用thymeleaf生成了静态页面，在使用nginx代理静态资源，具体生成方式是在调用了controller层查询了上述的商品信息后后查询出来后统一封装到map中，并添加到Context中，使用thymeleaf 中 templateEngine.process(&quot;item&quot;,context,writer )来生成静态页面，最后把生成的静态页面放到nginx的 html目录中，并且配置nginx中的nginx.conf配置文件  来配置 server 实现代理静态页面，</p><p>每次数据有跟新、包括变更频繁的像价格，我们使用的rabbitmq消息中间件 ，运营后台发生改变就把skuid放到消息队列中，消费者从队列得到消息后拿到skuid重新查询及重新生成静态页面并覆盖原有的页面 ，我们生成的静态页面的名字规则就是以skuid命名，比如23232.html</p><h3><a name='header-n2564' class='md-header-anchor '></a>8.4：购物车</h3><p>我们购物车要求用户必须登录后才能操作购物车，购物车的实现就是使用redis来做的，使用的hash类型来存，hash有两个key，我们大key 就是一个固定的前缀 carts，小key是用户的账号，value是购物车商品的集合，value中主要放的是商品的图片、名称、价格、数量，</p><p>每次操作都是在操作redis的内容，当添加的商品之前购物车有就把num数量进行累加，如果没有就直接添加到value中的集合中，redis的操作我们在boot项目中用的是  redisTemplate ，比如操作购物车的redis ：redisTemplate.boundHashOps(CacheKey.cart_list).put(username,cartList);</p><p>购物车中这块里面的营销价格计算我没有参与，每次查询购物车和添加修改购物车时我放入redis后调用人家给提供的接口去重新计算价格</p><p>问题：购物车每次前端提交如果频繁点击+号会不会卡？你们怎么做？</p><p>我们不是每次点击购物车+号或-号来改变数量的时候就直接去跟新redis，这块不做交互，在点击去结算时以最后传过的参数为准只操作一次购物车的信息</p><h3><a name='header-n2575' class='md-header-anchor '></a>8.5：预下单流程</h3><p>点击结算进入预下单流程，</p><p>1：先从购物车redis中获取商品数据后，重新查库校验跟新一遍购物车的数据，尤其是价格</p><p>2：校验通过后计算库存，库存不足就直接return 返回接口提示库存不足</p><p>3：库存校验通过，初始化订单表、订单详情表、跟新sku表（库存、销量）、第三方流水号表、用户地址表及初始化评价表</p><p>4：初始化完毕后就提供用户选择支付方式了</p><h3><a name='header-n2586' class='md-header-anchor '></a>8.6：微信支付流程</h3><p>1: 请求微信统一下单api接口，参数有 我们系统的订单号、支付的金额（分）、回调地址、appid、商户号等等这些；</p><p>2：微信以xml格式响应一个预支付链接，pc端支付的话把这个链接使用qrcode生成二维码，手机端的不需要生成直接把预支付链接给前端；</p><p>3：用户扫码或者调起手机支付客户端开始校验，输入支付密码确认支付</p><p>4：微信支付平台确认支付成功后通过回调通知我们系统支付的结果，我们收到回调通知后需要修改订单的状态为已支付，支付状态为支付成功或失败，同时维护第三方流水号并且 响应微信接口</p><p>5：如果回调没收到，我们使用三方流水号，也就是微信端的订单号去主动请求微信的接口去查询一下支付的状态。</p><p>问题：回调收不到，可能我们服务器防火墙拦截掉了也可能是没有外网的往返权限、也有可能回调地址不对</p><h3><a name='header-n2599' class='md-header-anchor '></a>8.7：多个人同时购买一个商品库存怎么保证？</h3><p>使用分布式锁的方式去锁库存，参考 2.11</p><h3><a name='header-n2602' class='md-header-anchor '></a>8.8：重复订单提交</h3><p>1：前端做了一个校验，就是提交订单后按钮置灰，取消onclick事件，取消向后台发送请求</p><p>2：创建订单的时候，用订单信息计算一个哈希值，存入redis，key为该值，在每次提交订单时判断redis中是否有key，有则不允许重复提交，没有则生成一个新key，放到redis中设置个过期时间，然后创建订单。（这种最方便最快捷）</p><p>3：使用mysql数据库表，创建一个中间表，利用表中唯一索引机制验证，每次request进来则往表里面插入数据，成功，则可以继续操作（相当于获取锁），失败，则说明有操作在进行，操作完成后，删除此条记录。（相当于释放锁）</p><h3><a name='header-n2609' class='md-header-anchor '></a>8.9：超时订单关闭</h3><p>对于支付中和待支付的订单，我们通过配置文件来设置超时的订单关闭时间 ，然后使用定时任务去把订单表中支付中和待支付的订单在大于了设置关闭订单的条件下 ，手动批量改为订单关闭状态，目地是为了减少避免脏数据的产生。</p><h2><a name='header-n2612' class='md-header-anchor '></a>九：头条项目(阅读资讯类)</h2><h3><a name='header-n2613' class='md-header-anchor '></a>9.0：项目架构+微服务拆分方案</h3><p>该项目为新闻咨询阅读类app项目，采用前后端分离开发，开发使用到的技术栈有springboot、springcloudAlibaba、mybatisplus、</p><p>kafka、elasticsearch、mysql、monggodb、docker、gitee、阿里云内容检测、fastDFS文件服务器，前端vue；</p><p>项目包括admin运营后台端，做基础数据维护、文章审核和文章上下架、统计热点文章</p><p>​                wemedia自媒体端，普通用户申请成为自媒体人后，编辑、草稿、发布文章，（文章累积阅读量获取佣金）</p><p>​                app端，审核通过的文章前端可以查询、浏览、关注、评论</p><p>​                微服务接口，7个业务服务（admin管理端、文章微服务、行为微服务、评论微服务、搜索微服务、app端用户微服务、</p><p>​                自媒体微服务），4个非业务公用包（api统一接口定义、common集成文件资源管理fastdfs、全文检索elasticsearch、</p><p>​                通用异常处理、  json转换、monggo数据库、线程池、阿里云安全内容检测），网关3个（过滤器校验用户token、路由下游</p><p>​                微服务，无业务代码操作）</p><h3><a name='header-n2632' class='md-header-anchor '></a>9.1：基础功能，admin后台维护基本信息</h3><p>admin端基础功能包括维护app端首页展示的频道分类、置顶文章、广告位展示配置、签到获取金币、阅读量比较高的文章日统计报表（echarts）、敏感词维护，主要分两类，一类基本数据的录入维护、一类为基本信息app展示的配置规则维护，前端使用elmentUI+VUE,也是前后端分离开发，调用统一的接口，采用restful风格响应json穿在前台解析渲染。</p><h3><a name='header-n2635' class='md-header-anchor '></a>9.2：普通用户申请成为自媒体人（权限）</h3><p>要发布文章，用户角色必须是自媒体人，</p><p>关于权限控制：shiro权限、Springsecurity、数据库表结构权限设计</p><p>Shiro三个核心组件：Subject（主体，交互的用户）, SecurityManager （shiro心脏，与用户交互都经过 SecurityManager 进行控制，管理着所有 Subject、且负责进行认证和授权、及会话、缓存的管理）和 Realms（域，Shiro从从Realm获取安全数据如用户、角色、权限），shiro使用小巧灵活，通过标签控制页面级的按钮操作。</p><p>Springsecurity是spring家族下的权限重量级框架，如果项目用的springmvc ，使用起来很方便。但是如果项目中没有用到spring，那就不要考虑它了，通过过滤器的方式先认证用户，通过认证的获取到用户信息按不同的内部角色进行权限划分，可以控制到方法级别；</p><p>关于用户角色、权限我们项目中的划分方式是通过数据库表结构的方式来区分，【权限7张表】首先角色包括</p><p>用户表，角色表，用户和角色关系表，一个用户可以有多个角色；</p><p>权限表设计：菜单权限表、角色和菜单权限关系表、功能权限表、功能权限对应菜单权限表</p><h3><a name='header-n2650' class='md-header-anchor '></a>9.3：发布、审核和人工审核</h3><p>1：发布中表结构涉及素材库、内容库，内容库和素材库为一对多关系，一个内容可以引用多个素材；内容库中status字段代表发布前的所有流程，流程包括草稿、提交（待审核）、审核失败、人工审核、人工审核通过、审核成功待发布、已发布；</p><p>2：使用富文本编辑、暂存草稿功能，富文本编辑中图片、短视频我们是以fastDFS作为文件服务器来做文件存储，数据库中对应的表中存放上传的地址，在文件上传中没有使用到断点续传，对于网络波动上传失败的情况，我们需要手动再次上传，一般上传的文件大小都是限制在10MB</p><p>3:发布需要保存的字段有标题/标签/富文本编辑的内容/所属分类/发布时间/文章内容列表封面，保存发布后，状态更新为待审核状态，我们通过kafka消息中间件存储待审核的内容id，通过消费端监听类监听kafka主题获取到内容id，进行内容的自动审核，审核调用阿里云的内容检测服务进行文本、图片内容审核，另外再结合本地维护的敏感词文本，再进行与敏感词匹配审核，审核通过后比较发布时间，发布时间小于当前审核时间则为已发布，发布时间大于审核时间则为审核通过待发布，阿里云审核结果为不确定时计入人工审核，人工审核需要单独查看内容的详情后修改审核状态，对于审核通过待发布的内容，使用xxljob定时任务每隔30分钟执行一次，发布时间小于等于系统时间直接修改发布状态为已发布！</p><h3><a name='header-n2657' class='md-header-anchor '></a>9.4：用户评论、文章点赞</h3><p>评论 mongodb存储评论内容</p><p>文章点赞使用redis 的zsort类型实现</p><h3><a name='header-n2662' class='md-header-anchor '></a>9.5：数据同步es库及es api查询</h3><p>发布的文章存入es索引库，导入方式两种，第一初始化批量导入，第二种发布的文章审核通过后使用消息中间件完成单条同步</p><h3><a name='header-n2665' class='md-header-anchor '></a>9.6：线程池记录搜索记录</h3><p>ThreadPoolExecutor() 创建线程池，对于写的操作异步进行，在插入方法中使用注解<code>@Async(&quot;taskExecutor&quot;)</code>进行异步调用，使得该方法加入线程池运行，这个值为在是线程池中的方法名称，需要与<code>@EnableAsync</code>一块使用</p></div>
</body>
</html>